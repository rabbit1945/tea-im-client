{"version":3,"file":"js/app.bebceb0c.js","mappings":"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","sources":["webpack://webchat-view/./src/App.vue","webpack://webchat-view/src/App.vue","webpack://webchat-view/./src/App.vue?51dd","webpack://webchat-view/./src/App.vue?0e40","webpack://webchat-view/./src/pages/Login/index.vue","webpack://webchat-view/./src/utils/cookie.js","webpack://webchat-view/src/pages/Login/index.vue","webpack://webchat-view/./src/pages/Login/index.vue?6a91","webpack://webchat-view/./src/pages/Login/index.vue?09dd","webpack://webchat-view/./src/pages/Home/index.vue","webpack://webchat-view/./src/pages/Home/MsgTop/index.vue","webpack://webchat-view/src/pages/Home/MsgTop/index.vue","webpack://webchat-view/./src/pages/Home/MsgTop/index.vue?cf46","webpack://webchat-view/./src/pages/Home/MsgTop/index.vue?fb64","webpack://webchat-view/./src/pages/Home/MsgBase/index.vue","webpack://webchat-view/src/pages/Home/MsgBase/index.vue","webpack://webchat-view/./src/pages/Home/MsgBase/index.vue?ccc1","webpack://webchat-view/./src/pages/Home/MsgBase/index.vue?a867","webpack://webchat-view/./src/pages/Home/Messages/index.vue","webpack://webchat-view/./src/pages/Home/MsgSend/index.vue","webpack://webchat-view/./src/pages/Home/Audio/index.vue","webpack://webchat-view/src/pages/Home/Audio/index.vue","webpack://webchat-view/./src/pages/Home/Audio/index.vue?e629","webpack://webchat-view/./src/pages/Home/Audio/index.vue?e489","webpack://webchat-view/src/pages/Home/MsgSend/index.vue","webpack://webchat-view/./src/pages/Home/MsgSend/index.vue?e953","webpack://webchat-view/./src/pages/Home/MsgSend/index.vue?5604","webpack://webchat-view/./src/pages/Home/Item/index.vue","webpack://webchat-view/src/pages/Home/Item/index.vue","webpack://webchat-view/./src/pages/Home/Item/index.vue?b479","webpack://webchat-view/./src/pages/Home/Item/index.vue?a2fe","webpack://webchat-view/src/pages/Home/Messages/index.vue","webpack://webchat-view/./src/pages/Home/Messages/index.vue?2e74","webpack://webchat-view/./src/pages/Home/Messages/index.vue?7aed","webpack://webchat-view/./src/pages/Home/UserList/index.vue","webpack://webchat-view/src/pages/Home/UserList/index.vue","webpack://webchat-view/./src/pages/Home/UserList/index.vue?f8dd","webpack://webchat-view/./src/pages/Home/UserList/index.vue?f9ea","webpack://webchat-view/src/pages/Home/index.vue","webpack://webchat-view/./src/pages/Home/index.vue?b7b8","webpack://webchat-view/./src/pages/Home/index.vue?af05","webpack://webchat-view/./src/router/routes.js","webpack://webchat-view/./src/utils/token.js","webpack://webchat-view/./src/api/ajax.js","webpack://webchat-view/./src/api/mockAjax.js","webpack://webchat-view/./src/api/index.js","webpack://webchat-view/./src/store/user.js","webpack://webchat-view/./src/store/message.js","webpack://webchat-view/./src/store/index.js","webpack://webchat-view/./src/router/index.js","webpack://webchat-view/./src/main.js","webpack://webchat-view/webpack/bootstrap","webpack://webchat-view/webpack/runtime/amd options","webpack://webchat-view/webpack/runtime/chunk loaded","webpack://webchat-view/webpack/runtime/compat get default export","webpack://webchat-view/webpack/runtime/define property getters","webpack://webchat-view/webpack/runtime/global","webpack://webchat-view/webpack/runtime/hasOwnProperty shorthand","webpack://webchat-view/webpack/runtime/make namespace object","webpack://webchat-view/webpack/runtime/node module decorator","webpack://webchat-view/webpack/runtime/jsonp chunk loading","webpack://webchat-view/webpack/startup"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('router-view')\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n   <router-view></router-view>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: \"App\",\r\n  components: {\r\n   \r\n  },\r\n  metaInfo() {\r\n    return {\r\n      title: this.$store.state.message.title, // set a title\r\n      meta: [{                 // set meta\r\n        name: 'keyWords',\r\n        content: 'lightning'\r\n      }],\r\n      link: [{                 // set link\r\n        rel: 'asstes',\r\n        href: 'https://assets-cdn.github.com/'\r\n      }]\r\n\r\n    }\r\n   \r\n  },\r\n  data () {\r\n    return {\r\n      title: \"闪电\"\r\n\r\n    }\r\n  },\r\n  mounted () {\r\n   },\r\n\r\n  destroyed() { //离开这个界面之后，删除滚动事件，不然容易除bug\r\n  },\r\n\r\n  methods:{\r\n   \r\n    \r\n  }\r\n  \r\n}\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  font-family: Avenir, Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  margin-top: 60px;\r\n}\r\n</style>\r\n","import mod from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=528275c4&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=528275c4&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"logon login-form\"},[_c('h1',[_vm._v(\"登录\")]),_c('el-form',{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.ruleForm,\"status-icon\":\"\",\"rules\":_vm.rules,\"label-width\":\"100px\",\"label-position\":\"left\"}},[_c('el-form-item',{attrs:{\"prop\":\"login\",\"rules\":[\r\n      { required: true, message: '账号不能为空'},\r\n      { type: 'email', message: '账号必须是邮箱格式'}\r\n    ]}},[_c('el-input',{attrs:{\"type\":\"login\",\"autocomplete\":\"off\",\"placeholder\":\"账号\"},model:{value:(_vm.ruleForm.login),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"login\", $$v)},expression:\"ruleForm.login\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\",\"rules\":[\r\n            { required: true, message: '密码不能为空'},\r\n            { type: 'string', required: true, min: 6, message: '密码大于5个字符'}\r\n\r\n          ]}},[_c('el-input',{attrs:{\"type\":\"password\",\"autocomplete\":\"off\",\"placeholder\":\"密码\"},model:{value:(_vm.ruleForm.password),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"password\", $$v)},expression:\"ruleForm.password\"}})],1),_c('el-form-item',[_c('el-button',{staticClass:\"but\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"提交\")])],1),_c('span',{staticClass:\"icon-login\"},[_c('svg',{staticClass:\"icon\",attrs:{\"aria-hidden\":\"true\"},on:{\"click\":function($event){return _vm.getAuthLogin('gitee')}}},[_c('use',{attrs:{\"xlink:href\":\"#icon-gitee\"}})])])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Cookies from 'js-cookie'\r\n//存储Cache\r\nexport const setCache = (name,data) => {\r\n  Cookies.set(name,data)\r\n};\r\n//获取Cache\r\nexport const getCache = (name) => {\r\n  return Cookies.get(name);\r\n};\r\n\r\n//清除本地存储的Cache\r\nexport const removeCache=(name)=>{\r\n  Cookies.remove(name);\r\n}\r\n","<template>\r\n<div class=\"logon login-form\">\r\n    <h1>登录</h1>\r\n    <el-form :model=\"ruleForm\" status-icon :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" label-position = \"left\" class=\"demo-ruleForm \">\r\n        <el-form-item \r\n         prop=\"login\"\r\n         :rules=\"[\r\n      { required: true, message: '账号不能为空'},\r\n      { type: 'email', message: '账号必须是邮箱格式'}\r\n    ]\"\r\n         >\r\n         <el-input type=\"login\" v-model=\"ruleForm.login\" autocomplete=\"off\" placeholder = \"账号\"></el-input>\r\n\r\n        </el-form-item>\r\n        <el-form-item \r\n         prop=\"password\"\r\n         :rules=\"[\r\n            { required: true, message: '密码不能为空'},\r\n            { type: 'string', required: true, min: 6, message: '密码大于5个字符'}\r\n\r\n          ]\"\r\n         >\r\n        <el-input type=\"password\" v-model=\"ruleForm.password\" autocomplete=\"off\" placeholder=\"密码\"></el-input>\r\n        </el-form-item>      \r\n        <el-form-item>\r\n            <el-button class = \"but\" type=\"primary\" @click=\"submitForm('ruleForm')\">提交</el-button>\r\n        </el-form-item>\r\n\r\n          <span class=\"icon-login\">\r\n            <svg class=\"icon\" aria-hidden=\"true\" @click=\"getAuthLogin('gitee')\">\r\n              <use xlink:href=\"#icon-gitee\"></use>\r\n            </svg>\r\n\r\n            <!-- <svg class=\"icon\" aria-hidden=\"true\">\r\n              <use xlink:href=\"#icon-github-fill\"></use>\r\n            </svg> -->\r\n          </span>\r\n        \r\n    </el-form>\r\n\r\n</div>\r\n</template>\r\n \r\n <script>\r\n \r\n import { setCache, getCache,removeCache} from \"@/utils/cookie\";\r\n export default {\r\n    data() {\r\n    \r\n      return {\r\n        ruleForm: {\r\n          login:'',\r\n          password: '',\r\n        },\r\n        rules:{\r\n\r\n        },\r\n\r\n        oauthToken:getCache(\"oauthToken\"),\r\n        isAuthLogin:getCache(\"isAuthLogin\")\r\n      };\r\n    },\r\n    mounted() {\r\n      const oauthToken = this.oauthToken\r\n      const isAuthLogin = this.isAuthLogin\r\n\r\n      console.log('oauthToken',oauthToken,isAuthLogin);\r\n      if (oauthToken && isAuthLogin) {\r\n        \r\n        try {\r\n          // 登录\r\n          this.$store.dispatch(\"giteeLogin\", {\r\n              'oauthToken': oauthToken \r\n              }).then(res => {\r\n              if (res.code !== 10000) {\r\n                  return this.$alert(\"登录失败\")\r\n              }\r\n              // 登录成功跳转页面\r\n              this.$router.push('/');\r\n            }).catch(res=>{\r\n                this.$alert(\"登录失败\") \r\n          })\r\n       \r\n        } catch (error) {\r\n            this.$alert(error.message);        \r\n        }\r\n\r\n      }\r\n\r\n     \r\n    },\r\n    methods: {\r\n      async getAuthLogin(name){\r\n        const oauthToken = this.oauthToken ?? \"\"\r\n\r\n        await this.$store.dispatch(\"authLogin\",`?origin=${name}&oauthToken=${oauthToken}`).then(res => {\r\n          if (res.url && res.url.length > 0) {\r\n            \r\n            window.location.href = res.url\r\n\r\n          } \r\n          if (res.oauthToken && res.origin ) {\r\n            window.location.href = \"https://\"+ window.location.host \r\n\r\n          }\r\n          \r\n          \r\n        });\r\n\r\n      },\r\n\r\n      \r\n      async submitForm(formName) {\r\n        this.$refs[formName].validate(async(valid) => {\r\n          if (valid) {\r\n            \r\n            try {\r\n              //登录成功\r\n              const { login, password } = this.ruleForm;\r\n              \r\n              login&&password&&(await this.$store.dispatch(\"userLogin\", { login, password }).then (res => {\r\n                  if (res.code !== 10000) {\r\n                    return this.$alert(\"登录失败\")\r\n                  }\r\n                  // 登录成功跳转页面\r\n                  this.$router.push('/');\r\n                  }).catch(res=>{\r\n                    this.$alert(\"登录失败\") \r\n                  }) \r\n              )  \r\n             \r\n            } catch (error) {\r\n              this.$alert(error.message);\r\n                \r\n            }\r\n          } else {\r\n            this.$alert(\"登录失败\") \r\n          }\r\n        });\r\n      },\r\n    }\r\n  }\r\n </script>\r\n \r\n <!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n <style scoped>\r\n.but {\r\n    /* width: 300px !important; */\r\n    margin-left: 47px!important;\r\n}\r\n.login-form{\r\n    /* box-shadow: 0 2px 12px 0  ALICEBLUE;\r\n    border-radius: 8px;  */\r\n    width: 400px;\r\n    height: 300px;\r\n    max-width: 100%;\r\n    padding: 0px 35px 0; \r\n    margin:auto;\r\n    position:absolute; \r\n    top:50%;\r\n    left:80%;\r\n    margin:-150px 0 0 -260px; \r\n}\r\n\r\n\r\n/* body {\r\n    background-image: url(./images/猫.jpeg);\r\n} */\r\n\r\n\r\n\r\n.logon input {\r\n    display: block;\r\n    width: 200px;\r\n    height: 30px;\r\n    margin-top: 10px;\r\n    margin-left: 100px;\r\n    font-size: 15px;\r\n    border: 1px solid aquamarine;\r\n    border-radius: 12px;\r\n    text-align: center;\r\n}\r\n.logon button {\r\n    width: 200px;\r\n    height: 40px;\r\n    margin-top: 10px;\r\n    margin-left: 100px;\r\n    background-color: aquamarine;\r\n    border: 1px solid transparent;\r\n    cursor: pointer;\r\n    border-radius: 12px;\r\n}\r\n    \r\n\r\n.logon h1 {\r\n    width: 200px;\r\n    height: 30px;\r\n    margin-top: 21px;\r\n    margin-left: 139px;    \r\n    margin-bottom: 30px;\r\n    padding-left: 67px;\r\n\r\n}\r\n.icon {\r\n  width: 1.5em;\r\n  height: 1em;\r\n  vertical-align: -0.15em;\r\n  fill: currentColor;\r\n  overflow: hidden;\r\n  font-size: 30px;\r\n  cursor: pointer;\r\n}\r\n\r\n.icon-login {\r\n  display: block;\r\n  margin-left: 100px;\r\n}\r\n\r\n\r\n </style>\r\n ","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4842faa5&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=4842faa5&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4842faa5\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"wrap\"},[_c('MsgTop'),_c('MsgBase',{attrs:{\"userStatus\":_vm.userStatus}}),_c('Messages'),_c('UserList',{attrs:{\"showUser\":true}}),_c('router-view')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"top\"},[_c('span',{staticClass:\"chatRoomName\"},[_vm._v(_vm._s(_vm.roomName))]),_c('span',{staticClass:\"peopleNumber\"},[_vm._v(\" 在线 \"+_vm._s(_vm.isOnlineNum)+\" 人 \")])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"," <template>\r\n     <div class=\"top\">\r\n            <span class=\"chatRoomName\">{{ roomName }}</span>\r\n            <span class=\"peopleNumber\">\r\n               在线 {{ isOnlineNum }} 人\r\n            </span>\r\n\r\n        </div>\r\n </template>\r\n  \r\n  <script>\r\n  //引入store\r\n  // import store from \"@/store\";\r\n  export default {\r\n    name: \"MsgTop\",\r\n    data() {\r\n      return {\r\n        \"roomName\":this.$store.state.user.roomInfo.roomName,\r\n        \"isOnlineNum\":this.$store.state.user.roomInfo.countOnline\r\n       }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n  <style scoped>\r\n  \r\n  </style>\r\n  ","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3420ae6c&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3420ae6c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"base\"},[_c('img',{staticClass:\"userLogo\",attrs:{\"src\":_vm.userLogo,\"alt\":\"\"}}),(_vm.userStatus == 'online')?_c('span',{staticClass:\"userStatus\",staticStyle:{\"background-color\":\"blue\"}}):_vm._e(),_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.nickName))]),_c('img',{staticClass:\"logout\",attrs:{\"src\":require(\"./images/logout.png\"),\"alt\":\"登出\"},on:{\"click\":_vm.logout}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"," <template>\r\n     <!-- 基础信息 -->\r\n     <div class=\"base\">\r\n          <!-- 用户头像 -->\r\n          <img class=\"userLogo\" :src= \"userLogo\" alt=\"\">\r\n          <span class=\"userStatus\" v-if = \"userStatus == 'online'\" style=\"background-color: blue;\"></span>\r\n          <span class=\"name\">{{ nickName }}</span> \r\n            \r\n          <img @click = 'logout' src = \"./images/logout.png\" alt=\"登出\"  class=\"logout\">\r\n      \r\n    </div>\r\n </template>\r\n  \r\n  <script>\r\n  export default {\r\n    name: \"MsgBase\",\r\n    data() {\r\n      return {\r\n        \"nickName\":this.$store.state.user.userInfo.nick_name,\r\n        \"userLogo\": this.$store.state.user.userInfo.photo,\r\n        \"user_id\":this.$store.state.user.userInfo.user_id,\r\n        \"room_id\":this.$store.state.user.roomInfo.room_id\r\n      }\r\n    },\r\n    props:['userStatus'],\r\n   \r\n    methods:{\r\n    \r\n      logout(){\r\n        this.$confirm(\"请问是否退出账号？\")\r\n        .then(_ => {\r\n        \r\n          this.$store.dispatch('userLogout').then(res => {\r\n            if (res === true) {\r\n             \r\n              this.$socket.close()\r\n              this.$message({\r\n                type: 'success',\r\n                message: \"账号登出成功！！！\"\r\n              });\r\n              this.$router.push({name:'Login'});\r\n            }\r\n          })          \r\n          \r\n          \r\n          \r\n        })\r\n        .catch(_ => {});\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n  <style scoped>\r\n  .base {\r\n    position: relative;\r\n    width: 100px;\r\n    height: 800px;\r\n    min-height: 800px;\r\n    float: left;\r\n    border-right: 1px solid #fff;\r\n    border-bottom-left-radius: 20px;\r\n    background-color: cadetblue;\r\n    z-index: 1;\r\n\r\n}\r\n\r\n.userLogo {\r\n    width: 40px;\r\n    height: 40px;\r\n    border-radius: 20px;\r\n    margin: 40px 30px;\r\n\r\n\r\n}\r\n\r\n\r\n.logout {\r\n    position: absolute;\r\n    bottom: 10px;\r\n    left: 20px;\r\n    width: 40px;\r\n    height: 40px;\r\n    cursor: pointer;\r\n}\r\n\r\n.userStatus{\r\n  position: absolute; \r\n  top: 65px;\r\n  left: 60px;\r\n  width: 6px;\r\n  height: 6px;\r\n  border-radius: 3px;\r\n  background-color: grey;\r\n\r\n}\r\n\r\n.name {\r\n    width: 70px;\r\n    display: block;\r\n    font-size: 15px;\r\n    color: azure;\r\n    margin: -35px 23px;\r\n}\r\n  </style>\r\n  ","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=a0a43bfc&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=a0a43bfc&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a0a43bfc\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',_vm._b({staticClass:\"message\"},'div',_vm.message,false),[_c('virtual-list',{ref:\"returnBottom\",staticClass:\"msg-list\",attrs:{\"data-key\":'seq',\"data-sources\":_vm.historyMessageList,\"data-component\":_vm.itemComponent,\"keeps\":this.keeps,\"estimate-size\":this.estimateSize,\"start\":100},on:{\"totop\":_vm.totop,\"tobottom\":_vm.bottom,\"scroll\":_vm.onScroll}}),(_vm.msgNum > 0 && _vm.isBottom === false)?_c('el-badge',{staticClass:\"item msg-badge-down\",attrs:{\"value\":_vm.msgNum}},[_c('el-button',{attrs:{\"size\":\"small\",\"icon\":\"el-icon-arrow-down\"},on:{\"click\":_vm.getLocation}},[_vm._v(\"最新消息\")])],1):_vm._e(),(_vm.msgNum > 0 && _vm.isBottom === true)?_c('el-badge',{staticClass:\"item msg-badge-up\",attrs:{\"value\":_vm.msgNum}},[_c('el-button',{attrs:{\"size\":\"small\",\"icon\":\"el-icon-arrow-up\"},on:{\"click\":_vm.getLocation}},[_vm._v(\"最新消息\")])],1):_vm._e(),_c('MsgSend',{attrs:{\"proTitle\":_vm.title},on:{\"findNewMsg\":_vm.findNewMsg}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"world\"},[_c('VEmojiPicker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showDialog),expression:\"showDialog\"}],staticClass:\"msg-emoji\",on:{\"select\":_vm.selectMsg}}),_c('div',{staticClass:\"msg-button\"},[_c('el-button',{staticClass:\"msg-el-button\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.toogleDialogEmoji}},[_c('img',{staticClass:\"msg-img\",attrs:{\"src\":\"/assets/images/emoji.png\"}})]),_c('div',{staticClass:\"audio\"},[_c('Audio',{on:{\"audioData\":_vm.audioData}})],1)],1),_c('at',_vm._b({attrs:{\"members\":_vm.members,\"filter-match\":_vm.filterMatch,\"delete-match\":_vm.deleteMatch,\"name-key\":\"nick_name\"},on:{\"insert\":_vm.getValue},scopedSlots:_vm._u([{key:\"item\",fn:function(s){return [_c('span',{domProps:{\"textContent\":_vm._s(s.item.nick_name)}})]}}])},'at',_vm.userList,false),[_c('div',{ref:\"input\",staticClass:\"msg-content\",attrs:{\"placeholder\":\"说点什么…\",\"contenteditable\":\"\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.msgSend.apply(null, arguments)}}})])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"home\"},[_c('div',{on:{\"click\":function($event){return _vm.getPermission()}}},[_c('img',{staticClass:\"msg-img\",attrs:{\"src\":require(\"./images/mic.png\")}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowPermission),expression:\"isShowPermission\"}],ref:\"keypressSpace\",staticClass:\"audio-tips\",attrs:{\"tabindex\":\"1\"},on:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"space\",32,$event.key,[\" \",\"Spacebar\"]))return null;return _vm.startRecorder()}}},[_c('img',{staticClass:\"msg-img\",attrs:{\"src\":require(\"./images/mic.png\")}}),_c('span',[_vm._v(\"按下空格开始录音，在按下空格录音结束。\")]),_c('el-button',{attrs:{\"round\":\"\",\"size\":\"mini\",\"type\":\"success\"},on:{\"click\":function($event){return _vm.outPlay()}}},[_vm._v(\"退出\")])],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.startEnd && _vm.countdownimes === 0),expression:\"startEnd && countdownimes === 0\"}],staticClass:\"times\"},[_vm._v(_vm._s(_vm.satrtTime))]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.startEnd && _vm.countdownimes > 0),expression:\"startEnd && countdownimes > 0\"}],staticClass:\"times\"},[_vm._v(_vm._s(_vm.countdownimes)+\" 10秒之后自动发送\")]),_c('canvas',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.startEnd),expression:\"startEnd\"}],staticClass:\"canvas\",attrs:{\"id\":\"canvas\"}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"home\">\r\n    <div @click=\"getPermission()\">\r\n          <img class = \"msg-img\" src=\"./images/mic.png\">\r\n    </div>\r\n    <!-- <Button type=\"info\" @click=\"startRecorder()\">开始录音</Button>  -->\r\n    <div tabindex=\"1\" ref = 'keypressSpace'  v-show=\"isShowPermission\" @keypress.space = \"startRecorder()\" class = \" audio-tips\"> \r\n        <img class = \"msg-img\" src=\"./images/mic.png\">\r\n        <span>按下空格开始录音，在按下空格录音结束。</span>\r\n        <el-button round size=\"mini\" type=\"success\" @click=\"outPlay()\">退出</el-button>\r\n    </div>\r\n    <div v-show=\"startEnd && countdownimes === 0\" class = \"times\">{{satrtTime}}</div>\r\n    <div v-show=\"startEnd && countdownimes > 0\" class = \"times\">{{countdownimes}} 10秒之后自动发送</div>\r\n    <canvas v-show=\"startEnd\" id=\"canvas\"  class = \"canvas\" >\r\n    </canvas>\r\n    <!-- <canvas id=\"playChart\" class = \"canvas\"></canvas> -->\r\n    \r\n  </div>\r\n</template>\r\n \r\n<script>\r\n  import Recorder from 'js-audio-recorder'\r\n  const lamejs = require('lamejstmp')\r\n  const recorder = new Recorder({\r\n    sampleBits: 16,                 // 采样位数，支持 8 或 16，默认是16\r\n    sampleRate: 11025,              // 采样率，支持 11025、16000、22050、24000、44100、48000，根据浏览器默认值，我的chrome是48000\r\n    numChannels: 1,                 // 声道，支持 1 或 2， 默认是1\r\n    compiling: true, // 是否边录边转换，默认是false\r\n  })\r\n \r\n  // 绑定事件-打印的是当前录音数据\r\n  // recorder.onprogress = function(params) {\r\n  //   console.log('--------------START---------------')\r\n  //   // console.log('录音时长(秒)', params.duration);\r\n  //   console.log('录音大小(字节)', params.fileSize);\r\n  //   console.log('录音音量百分比(%)', params.vol);\r\n  //   console.log('当前录音的当前部分', params.getNextData);\r\n\r\n  //   console.log('当前录音的总数据([DataView, DataView...])', params.getWholeData);\r\n  //   console.log('--------------END---------------')\r\n  // }\r\n  \r\n  export default {\r\n    name: 'Audio',\r\n    data () {\r\n      return {\r\n        //波浪图-录音\r\n        drawRecordId:null,\r\n        oCanvas : null,\r\n        ctx : null,\r\n        //波浪图-播放\r\n        drawPlayId:null,\r\n        pCanvas : null,\r\n        pCtx : null,\r\n        startEnd: false,\r\n        isShowPermission:false,\r\n        satrtTime:0, //开始计时时间\r\n        endTime:60,//结束计时时间\r\n        countdownimes: 0, // 倒计时\r\n\r\n      }\r\n    },\r\n    mounted(){     \r\n      this.startCanvas();     \r\n    },\r\n  \r\n    methods: {\r\n      /**\r\n       * 波浪图配置\r\n       * */\r\n      startCanvas(){\r\n        //录音波浪\r\n        this.oCanvas = document.getElementById('canvas');\r\n        this.ctx = this.oCanvas.getContext(\"2d\");\r\n        //播放波浪\r\n        // this.pCanvas = document.getElementById('playChart');\r\n        // this.pCtx = this.pCanvas.getContext(\"2d\");\r\n      },\r\n\r\n      outPlay() {\r\n        \r\n        this.stopRecorder();\r\n        this.startEnd = false;\r\n        this.isShowPermission = false;\r\n       \r\n      },\r\n \r\n      /**\r\n       *  录音的具体操作功能\r\n       * */\r\n      // 开始录音/结束录音\r\n      startRecorder () {\r\n        \r\n        if ( this.startEnd === false) {\r\n           recorder.start().then(() => {\r\n            this.startEnd = true;\r\n            this.drawRecord();//开始绘制图片\r\n            }, (error) => {\r\n              this.stopRecorder();\r\n                this.getRecorder();\r\n              this.startEnd = true;\r\n             \r\n              // 出错了\r\n              console.log(\"error:\",error);\r\n            });\r\n           \r\n        } else {\r\n          this.stopRecorder();\r\n          this.getRecorder();\r\n         \r\n         \r\n          this.startEnd = false;\r\n\r\n        }\r\n        \r\n      },\r\n      // 继续录音\r\n      resumeRecorder () {\r\n        recorder.resume()\r\n      },\r\n      // 暂停录音\r\n      pauseRecorder () {\r\n        recorder.pause();\r\n        this.drawRecordId && cancelAnimationFrame(this.drawRecordId);\r\n        this.drawRecordId = null;\r\n      },\r\n      // 结束录音\r\n      stopRecorder () {\r\n        recorder.stop()\r\n        this.drawRecordId && cancelAnimationFrame(this.drawRecordId);\r\n        \r\n        this.drawRecordId = null;\r\n      },\r\n      // 录音播放\r\n      playRecorder () {\r\n        recorder.play();\r\n        this.drawPlay();//绘制波浪图\r\n      },\r\n      // 暂停录音播放\r\n      pausePlayRecorder () {\r\n        recorder.pausePlay()\r\n      },\r\n      // 恢复录音播放\r\n      resumePlayRecorder () {\r\n        recorder.resumePlay();\r\n        this.drawPlay();//绘制波浪图\r\n      },\r\n      // 停止录音播放\r\n      stopPlayRecorder () {\r\n        recorder.stopPlay();\r\n      },\r\n      // 销毁录音\r\n      destroyRecorder () {\r\n        recorder.destroy().then(function() {\r\n          recorder = null;\r\n          this.drawRecordId && cancelAnimationFrame(this.drawRecordId);\r\n          this.drawRecordId = null;\r\n        });\r\n      },\r\n      /**\r\n       *  获取录音文件\r\n       * */\r\n      getRecorder(){\r\n        let toltime = parseInt(recorder.duration) ;//录音总时长\r\n        let fileSize = recorder.fileSize;//录音总大小\r\n        console.log(recorder.getWAV());\r\n        //录音结束，获取取录音数据\r\n        // let PCMBlob = recorder.getPCMBlob();//获取 PCM 数据\r\n        // let wavBlob = recorder.getWAVBlob();//获取 WAV 数据\r\n          \r\n        // let channel = recorder.getChannelData();//获取左声道和右声道音频数据\r\n        const mp3Blob = this.convertToMp3(recorder.getWAV());\r\n        \r\n        this.uploadWAVData(mp3Blob,toltime,fileSize)\r\n      },\r\n      /**\r\n       *  下载录音文件\r\n       * */\r\n      //下载pcm\r\n      downPCM(){\r\n        //这里传参进去的时文件名\r\n        recorder.downloadPCM('新文件');\r\n      },\r\n      //下载wav\r\n      downWAV(){\r\n        //这里传参进去的时文件名\r\n        recorder.downloadWAV('新文件');\r\n      },\r\n\r\n          //上传wav录音数据\r\n    uploadWAVData(wavBlob,toltime,fileSize) {\r\n      \r\n      var formData = new FormData()\r\n      // // 此处获取到blob对象后需要设置fileName满足当前项目上传需求，其它项目可直接传把blob作为file塞入formData\r\n      // const newbolb = new Blob([wavBlob], { type: 'audio/wav' })\r\n      // // 获取当时时间戳作为文件名\r\n      const fileOfBlob = new File([wavBlob], new Date().getTime() + '.mp3')\r\n      formData.append(\"file\",fileOfBlob)\r\n      this.$emit('audioData',{\r\n        \"formData\":formData,\r\n        \"toltime\":toltime,\r\n        \"fileSize\":fileSize\r\n      });\r\n\r\n    },\r\n      /**\r\n       *  获取麦克风权限\r\n       * */\r\n      getPermission(){\r\n        if (!this.isShowPermission) {\r\n          Recorder.getPermission().then(() => {\r\n            console.log(\"获取权限成功\")\r\n            this.isShowPermission = true\r\n          }, (error) => {\r\n            console.log(`${error.name} : ${error.message}`);\r\n            this.$alert(\"请开启麦克风权限\")\r\n            \r\n          });\r\n        } else {\r\n          this.isShowPermission = false\r\n        }\r\n       \r\n      },\r\n      /**\r\n       * 文件格式转换 wav-map3\r\n       * */\r\n      getMp3Data(){\r\n        const mp3Blob = this.convertToMp3(recorder.getWAV());\r\n        recorder.download(mp3Blob, 'recorder', 'mp3');\r\n      },\r\n      convertToMp3(wavDataView) {\r\n        // 获取wav头信息\r\n        const wav = lamejs.WavHeader.readHeader(wavDataView); // 此处其实可以不用去读wav头信息，毕竟有对应的config配置\r\n        const { channels, sampleRate } = wav;\r\n        const mp3enc = new lamejs.Mp3Encoder(channels, sampleRate, 128);\r\n        // 获取左右通道数据\r\n        const result = recorder.getChannelData()\r\n        const buffer = [];\r\n \r\n        const leftData = result.left && new Int16Array(result.left.buffer, 0, result.left.byteLength / 2);\r\n        const rightData = result.right && new Int16Array(result.right.buffer, 0, result.right.byteLength / 2);\r\n        const remaining = leftData.length + (rightData ? rightData.length : 0);\r\n \r\n        const maxSamples = 1152;\r\n        for (let i = 0; i < remaining; i += maxSamples) {\r\n          const left = leftData.subarray(i, i + maxSamples);\r\n          let right = null;\r\n          let mp3buf = null;\r\n \r\n          if (channels === 2) {\r\n            right = rightData.subarray(i, i + maxSamples);\r\n            mp3buf = mp3enc.encodeBuffer(left, right);\r\n          } else {\r\n            mp3buf = mp3enc.encodeBuffer(left);\r\n          }\r\n \r\n          if (mp3buf.length > 0) {\r\n            buffer.push(mp3buf);\r\n          }\r\n        }\r\n \r\n        const enc = mp3enc.flush();\r\n \r\n        if (enc.length > 0) {\r\n          buffer.push(enc);\r\n        }\r\n       \r\n        return new Blob(buffer, { type: \"audio/mp3\" });\r\n      },\r\n \r\n      /**\r\n       * 绘制波浪图-录音\r\n       * */\r\n      drawRecord () {\r\n       \r\n        this.satrtTime = Math.ceil(recorder.duration);//开始计时\r\n        //  剩余10秒倒计时\r\n        let countdownime = this.endTime - this.satrtTime;\r\n        if (countdownime <=10 && countdownime > 0 ) {        \r\n            this.countdownimes = this.endTime - this.satrtTime-1;\r\n            \r\n            if (this.countdownimes == 0 && this.startEnd) {\r\n              this.stopRecorder();\r\n              this.getRecorder();\r\n              this.startEnd = false;\r\n              this.satrtTime = 0;\r\n              this.countdownimes = 0;\r\n              return true;\r\n\r\n            } \r\n          \r\n        }\r\n        // 用requestAnimationFrame稳定60fps绘制\r\n        this.drawRecordId = requestAnimationFrame(this.drawRecord);\r\n \r\n        // 实时获取音频大小数据\r\n        let dataArray = recorder.getRecordAnalyseData(),\r\n            bufferLength = dataArray.length;\r\n \r\n        // 填充背景色\r\n        this.ctx.fillStyle = 'rgb(200, 200, 200)';\r\n        this.ctx.fillRect(0, 0, this.oCanvas.width, this.oCanvas.height);\r\n \r\n        // 设定波形绘制颜色\r\n        this.ctx.lineWidth = 2;\r\n        this.ctx.strokeStyle = 'rgb(0, 0, 0)';\r\n \r\n        this.ctx.beginPath();\r\n        \r\n        var sliceWidth = this.oCanvas.width * 1.0 / bufferLength, // 一个点占多少位置，共有bufferLength个点要绘制\r\n                x = 0;          // 绘制点的x轴位置\r\n \r\n        for (var i = 0; i < bufferLength; i++) {\r\n          var v = dataArray[i] / 128.0;\r\n          var y = v * this.oCanvas.height / 2;\r\n \r\n          if (i === 0) {\r\n            // 第一个点\r\n            this.ctx.moveTo(x, y);\r\n          } else {\r\n            // 剩余的点\r\n            this.ctx.lineTo(x, y);\r\n          }\r\n          // 依次平移，绘制所有点\r\n          x += sliceWidth;\r\n        }\r\n \r\n        this.ctx.lineTo(this.oCanvas.width, this.oCanvas.height / 2);\r\n        this.ctx.stroke();\r\n      },\r\n      /**\r\n       * 绘制波浪图-播放\r\n       * */\r\n      drawPlay () {\r\n        // 用requestAnimationFrame稳定60fps绘制\r\n        this.drawPlayId = requestAnimationFrame(this.drawPlay);\r\n        // 实时获取音频大小数据\r\n        let dataArray = recorder.getPlayAnalyseData(),\r\n                bufferLength = dataArray.length;\r\n        // 填充背景色\r\n        this.pCtx.fillStyle = 'rgb(200, 200, 200)';\r\n        this.pCtx.fillRect(0, 0, this.pCanvas.width, this.pCanvas.height);\r\n \r\n        // 设定波形绘制颜色\r\n        this.pCtx.lineWidth = 2;\r\n        this.pCtx.strokeStyle = 'rgb(0, 0, 0)';\r\n \r\n        this.pCtx.beginPath();\r\n\r\n        var sliceWidth = this.pCanvas.width * 1.0 / bufferLength, // 一个点占多少位置，共有bufferLength个点要绘制\r\n                x = 0;          // 绘制点的x轴位置\r\n \r\n        for (var i = 0; i < bufferLength; i++) {\r\n          var v = dataArray[i] / 128.0;\r\n          var y = v * this.pCanvas.height / 2;\r\n \r\n          if (i === 0) {\r\n            // 第一个点\r\n            this.pCtx.moveTo(x, y);\r\n          } else {\r\n            // 剩余的点\r\n            this.pCtx.lineTo(x, y);\r\n          }\r\n          // 依次平移，绘制所有点\r\n          x += sliceWidth;\r\n        }\r\n \r\n        this.pCtx.lineTo(this.pCanvas.width, this.pCanvas.height / 2);\r\n        this.pCtx.stroke();\r\n      }\r\n \r\n    },\r\n \r\n  }\r\n</script>\r\n \r\n<style  scoped>\r\n   \r\n.times {\r\n  width: 150px;\r\n  height: 30px; \r\n  position:relative;\r\n  top: -73px;\r\n  left:270px;\r\n  text-align: center;\r\n  border-radius: 30px;\r\n  z-index: 1;\r\n}\r\n.canvas {\r\n  width: 150px;\r\n  height: 30px; \r\n  position:relative;\r\n  top: -70px;\r\n  left:270px;\r\n  border-radius: 30px;\r\n  z-index: 1;\r\n\r\n}\r\n.audio-tips {\r\n  width: 89vw;\r\n    position: relative;\r\n    top: 0vh;\r\n    /* left: 30vw; */\r\n    text-align: center;\r\n    z-index: 1;\r\n    background-color: rgba(245,245,245,1.7);\r\n    height: 10vh;\r\n    border-collapse: collapse;\r\n}\r\n .msg-img {\r\n    width: 25px;\r\n    height: 25px; \r\n    padding-top: 10px;\r\n\r\n  }\r\n</style>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=503ad87d&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=503ad87d&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"503ad87d\",\n  null\n  \n)\n\nexport default component.exports"," <template>\r\n     <div class=\"world\">\r\n      <VEmojiPicker class = \"msg-emoji\" v-show = \"showDialog\" @select=\"selectMsg\"/>     \r\n      <div class=\"msg-button\">       \r\n        <el-button @click=\"toogleDialogEmoji\" type=\"primary\" class = \"msg-el-button\">\r\n          <img class = \"msg-img\" src=\"/assets/images/emoji.png\">\r\n        </el-button>\r\n        <div class=\"audio\"><Audio v-on:audioData = 'audioData'/> </div>\r\n      </div>\r\n      <at\r\n       :members=\"members\" \r\n       :filter-match=\"filterMatch\"\r\n       :delete-match=\"deleteMatch\"\r\n       @insert=\"getValue\"\r\n       v-bind=\"userList\" \r\n       name-key=\"nick_name\">\r\n        <template slot=\"item\" slot-scope=\"s\">\r\n          <!-- <img :src=\"s.item.avatar\"> -->\r\n          <span v-text=\"s.item.nick_name\"></span>\r\n        </template>\r\n        <div\r\n          ref=\"input\"\r\n          class=\"msg-content\" \r\n          placeholder=\"说点什么…\"\r\n          @keyup.enter=\"msgSend\"\r\n          \r\n          contenteditable>\r\n\r\n        </div>\r\n\r\n      </at>\r\n\r\n      </div>\r\n </template>\r\n  \r\n  <script>  \r\n  import {VEmojiPicker} from 'v-emoji-picker';\r\n  import Audio from '../Audio'\r\n  import At from 'vue-at'\r\n  export default {\r\n    name: \"MsgSend\",\r\n    components: {\r\n      VEmojiPicker,\r\n      Audio,\r\n      At\r\n    \r\n    },\r\n    data(){\r\n      return {\r\n        title:\"闪电\",\r\n        text:\"\", // 消息\r\n        showDialog:false,\r\n        drawer: false,\r\n        direction: 'btt',\r\n        user_id:this.$store.state.user.userInfo.user_id, // 用户ID\r\n        nick_name:this.$store.state.user.userInfo.nick_name, // 昵称\r\n        userLogo:this.$store.state.user.userInfo.photo, // 头像\r\n        room_id:this.$store.state.user.roomInfo.room_id, // 房间ID\r\n        audio:{}, // 音频数据\r\n        showUser:false,    // 是否显示@他人的用户表单\r\n        sumNoticeOtherUser:0,\r\n        countStr:0, // 统计字符的数量\r\n        members: [], // @ 用户列表\r\n        contactList:[] // 需要通知的列表\r\n      }\r\n    },\r\n    metaInfo() {\r\n        return {\r\n          title: this.$store.state.message.title, // set a title \r\n          \r\n        }\r\n    },\r\n      \r\n    sockets: {\r\n      async roomCallback (data) {\r\n        // console.log(\"客户端发过来了一个请求\",data);\r\n        // 获取服务端发来的数据\r\n        await this.$store.dispatch(\"getMessage\", data);\r\n         // 定位最新数据的位置\r\n        this.$emit('findNewMsg',{\"sendUserId\":data.user_id,\"userId\":this.user_id});\r\n        // 默认音频的大小\r\n        this.audio.fileSize = 0\r\n        // 动态设置title\r\n        this.$store.dispatch(\"getTitle\", {\r\n          \"user_id\":data.user_id,\r\n          \"contactList\":data.contactList\r\n        }).then(res =>{\r\n          this.title = this.$store.state.message.title;\r\n        })\r\n\r\n      }\r\n    },\r\n    mounted(){ \r\n      \r\n    },\r\n    destroyed() {\r\n    },\r\n    computed:{\r\n      userList:{\r\n        get() {\r\n          this.members = this.$store.state.user.roomUserList.userList\r\n        }\r\n      }\r\n    },\r\n  \r\n    methods: {\r\n     // 过滤联系人\r\n      filterMatch(name, chunk) {\r\n        return name.toLowerCase().indexOf(chunk.toLowerCase()) === 0;\r\n      },\r\n      // 删除联系人\r\n      deleteMatch(name, chunk, suffix) {\r\n          this.contactList = this.contactList.filter(\r\n                  item => item.nick_name!= chunk.trim()\r\n          );\r\n          console.log(\"deleteMatch:\",this.contactList);\r\n        return chunk === name + suffix;\r\n      },\r\n      // 获取联系人\r\n      getValue(val) {\r\n         return this.contactList.push(val);\r\n         \r\n      },\r\n     \r\n      audioData(val) {\r\n        console.log(\"val\",val);        \r\n        if (val) {\r\n           this.$store.dispatch(\"uploadAudio\", val.formData).then(res => {\r\n                   let path = res.file\r\n                   this.audio = {\r\n                    'file':path,\r\n                    'toltime':val.toltime,\r\n                    'fileSize':val.fileSize\r\n                   }\r\n                   this.msgSend()\r\n          })\r\n        } else {\r\n           tihs.alert(\"语音出现问题，请重试！！！\");\r\n           return false;\r\n        }\r\n        \r\n      },\r\n      selectMsg(val) {// 选择emoji后调用的函数\r\n         // 定义最后光标对象\r\n        var lastEditRange;\r\n        let input = this.$refs.input\r\n        let selection = getSelection()\r\n         \r\n        // 编辑框获得焦点\r\n        input.focus() \r\n        // 获取选定对象\r\n        let range = []\r\n        if (selection.rangeCount > 0) {\r\n          // 获取选定对象\r\n          range = selection.getRangeAt(0);       \r\n        // 判断是否有最后光标对象存在\r\n        if (lastEditRange) {\r\n            // 存在最后光标对象，选定对象清除所有光标并添加最后光标还原之前的状态\r\n            selection.removeAllRanges()\r\n            selection.addRange(lastEditRange)\r\n        } \r\n        // 获取光标对象的范围界定对象，一般就是textNode对象\r\n        let textNode = range.startContainer;\r\n        let rangeStartOffset = range.startOffset\r\n        // 文本节点在光标位置处插入新的表情内容\r\n        \r\n        textNode.insertData(rangeStartOffset, val.data)\r\n\r\n        // 光标移动到到原来的位置加上新内容的长度\r\n        range.setStart(textNode, rangeStartOffset + val.data.length)\r\n        // 光标开始和光标结束重叠\r\n        range.collapse(true)\r\n        // 清除选定对象的所有光标对象\r\n        selection.removeAllRanges()\r\n        // 插入新的光标对象\r\n        selection.addRange(range)\r\n        // 无论如何都要记录最后光标对象\r\n        lastEditRange = selection.getRangeAt(0)\r\n      \r\n      }     \r\n      },\r\n      //打开表情弹窗\r\n      toogleDialogEmoji () {\r\n        this.showDialog = !this.showDialog\r\n      },\r\n      // 发送\r\n      msgSend(){\r\n        this.$socket.open();\r\n        let input = this.$refs.input.innerText\r\n        let messgae = input.trim();\r\n        let content_type = 0; // 文本\r\n        if (this.audio.fileSize > 0) {\r\n           messgae = this.audio.file;\r\n           content_type = 1; // 音频\r\n        } \r\n       \r\n        if (messgae === ''|| messgae === null || messgae === undefined ) {\r\n          \r\n          this.$alert(\"你好，客官你还没有添写消息呢！！！\");\r\n          return false;\r\n        }\r\n        const user_id = this.user_id;\r\n        const nick_name = this.nick_name;\r\n        const userLogo = this.userLogo;\r\n        const room_id   = this.room_id;\r\n        let msgData  = {\r\n            \"room_id\": room_id,\r\n            \"user_id\": user_id,\r\n            \"nick_name\": nick_name,\r\n            \"msg\": messgae,\r\n            \"userLogo\":userLogo,\r\n            \"content_type\": content_type,\r\n            \"contactList\":this.contactList, //@他人功能\r\n            \r\n        };\r\n        \r\n        this.$socket.volatile.emit('room',msgData);     \r\n      },\r\n  \r\n    }\r\n\r\n  }\r\n  </script>\r\n  \r\n  <!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n  <style scoped>\r\n  .audio {\r\n    float: left;\r\n    width: 25px;\r\n    height: 25px; \r\n\r\n  }\r\n  .world {\r\n    position: absolute;\r\n    /* left: 99px; */\r\n    bottom: -220px;\r\n    padding-top: 10px;\r\n    width: 100%;\r\n    min-width: 50%;\r\n    height: 107px;\r\n    border-top: 1px solid #fff;\r\n    background-color: white;\r\n    margin-bottom: 100px;\r\n    border-radius:20px 20px\r\n  }\r\n  .msg-button {\r\n    height: 38px;\r\n    margin-top: -9px;\r\n  }\r\n  .msg-el-button {\r\n    margin-right: 10px;\r\n    border: none;  \r\n    background:white;\r\n  }\r\n  .msg-img {\r\n    width: 25px;\r\n    height: 25px; \r\n\r\n  }\r\n  .msg-emoji {\r\n    position: absolute;\r\n     left: 110px;\r\n    bottom: 161px;\r\n\r\n\r\n  }\r\n\r\n  .send {\r\n    margin-left: 40px;\r\n    width: 60%;\r\n    /* height: 140px; */\r\n    border: 1px;\r\n    border-radius: 10px;\r\n    background-color: white;\r\n    overflow: scroll;\r\n\r\n  }\r\n  .msg-content {\r\n    margin-top: 1px;\r\n    padding: 1px;\r\n    overflow: auto;\r\n    outline: none;\r\n    height: 6vh;\r\n  }\r\n\r\n  .msg-content:empty::before {\r\n      content: attr(placeholder);\r\n  }\r\n\r\n  \r\n\r\n  .userList {\r\n    min-width: 100px;\r\n    height: 200px;\r\n    border: 1px;\r\n    position: absolute;\r\n    bottom: 110px;\r\n    left: 70px;\r\n    overflow:auto;\r\n    border-color:  #ff0 transparent transparent;\r\n  }\r\n\r\n  [contenteditable] {\r\n    -webkit-user-select: text;\r\n    user-select: text;\r\n}\r\n\r\n  \r\n  \r\n  </style>\r\n  ","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=aafd6446&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=aafd6446&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"aafd6446\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"index\":_vm.index}},[_c('span',{staticClass:\"time-line\"},[_vm._v(_vm._s(this.source.send_time)+\" \")]),_c('div',{class:this.source.tag == 1 ? 'stream-item' : 'stream-item creator'},[_c('div',{class:this.source.tag == 1 ? 'item' : 'item creator'},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":this.source.userLogo}})]),_c('div',{staticClass:\"body\",on:{\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.clickMsg()}}},[_c('div',{class:this.source.tag == 1 ? 'name' :'name transform'},[_vm._v(_vm._s(this.source.nick_name))]),_c('div',{staticClass:\"content\"},[(this.source.content_type === 0)?_c('div',{staticClass:\"text\",attrs:{\"contenteditable\":\"false\"}},[_c('div',{staticClass:\"msg-html\",domProps:{\"innerHTML\":_vm._s(this.source.msg)}})]):_vm._e(),(this.source.content_type === 1)?_c('div',{staticClass:\"text\",attrs:{\"contenteditable\":\"false\"}},[_c('av-bars',{attrs:{\"canv-height\":30,\"audio-src\":this.source.msg}})],1):_vm._e()])])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div :index = index >\r\n        <span class='time-line'>{{ this.source.send_time }} </span>\r\n        <div  :class = \"this.source.tag == 1 ? 'stream-item' : 'stream-item creator' \">\r\n            <div :class = \"this.source.tag == 1 ? 'item' : 'item creator'\">\r\n                <div class=\"avatar\">\r\n                    <img :src=this.source.userLogo>\r\n                </div>\r\n                <div class = \"body\" @contextmenu.prevent.stop=\"clickMsg()\">\r\n                    <div :class = \"this.source.tag == 1 ? 'name' :'name transform' \">{{ this.source.nick_name }}</div>\r\n                    <div class = \"content\">\r\n                        <div contenteditable = \"false\" class=\"text\"  v-if = \"this.source.content_type === 0\"  >\r\n                            <div v-html=\"this.source.msg\" class=\"msg-html\"  ></div>\r\n                            <!-- {{ this.source.msg }} -->\r\n                        </div>\r\n\r\n                        <div contenteditable = \"false\" class=\"text\" v-if = \"this.source.content_type === 1\">\r\n\r\n                            <av-bars\r\n                            :canv-height =\"30\"\r\n                            :audio-src=this.source.msg>\r\n                            </av-bars>\r\n\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n   \r\n  </template>\r\n  \r\n  <script>\r\n    export default {\r\n        name: 'Item',\r\n        data(){\r\n            \r\n            return {\r\n                progress: 0,\r\n                is_stop: true,\r\n                duration: 0,\r\n                curr: 0,\r\n                volume:50,\r\n                balance: 50,       \r\n            }\r\n        },\r\n        props: {\r\n        // index of current item\r\n            index: { \r\n                type: Number\r\n            },\r\n            source: { \r\n                type: Object,\r\n                default () {\r\n                    return {}\r\n                }\r\n            },\r\n         \r\n        }\r\n}   \r\n  </script>\r\n  <style scoped>\r\n  .empty .stream-item.creator, .stream .stream-item.creator {\r\n    flex-direction: row-reverse;\r\n    }\r\n    .empty .stream-item, .stream .stream-item{\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 1em;\r\n  }\r\n \r\n  .msg-info {\r\n    height: 85px;\r\n  }\r\n\r\n  .item {\r\n    display: flex;\r\n    }\r\n\r\n    .item.creator {\r\n    transform: rotateX(180deg);\r\n    direction: rtl;\r\n    align-items: flex-end;\r\n    }\r\n\r\n    .item .avatar img{\r\n    display: block;\r\n    width: 40px;\r\n    height: 40px;   \r\n    border-radius: 50%\r\n    }\r\n    .item.creator .body {\r\n    transform: rotate(180deg)\r\n    }\r\n\r\n    .item .body .content {\r\n        position: relative;\r\n        color: #000;\r\n        background-color: #f0f8ff;\r\n        border-radius: 15px;\r\n        padding: .5em 1em\r\n    }\r\n    @media (max-width: 640px) {\r\n        .item .body .content {\r\n            padding:.5em\r\n        }\r\n    }\r\n\r\n    .item .body .content:after {\r\n        content: \"\";\r\n        position: absolute;\r\n        right: 100%;\r\n        top: 10px;\r\n        width: 14px;\r\n        height: 14px;\r\n        border-width: 0;\r\n        border-style: solid;\r\n        border-color: transparent;\r\n        border-bottom-width: 10px;\r\n        border-bottom-color: currentColor;\r\n        border-radius: 0 0 0 32px;\r\n        color: #f0f8ff\r\n    }\r\n\r\n    .item.creator .text {\r\n        transform: rotateY(180deg);\r\n        direction: ltr;\r\n    }\r\n\r\n    .item .body .name {\r\n        \r\n        padding-bottom: .2em;\r\n        font-size: 12px;\r\n    \r\n    }\r\n\r\n.transform {\r\n    transform: rotateY(180deg)\r\n}\r\n.empty .stream-item,.stream .stream-item {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 1em;\r\n}\r\n \r\n.time-line {\r\n    \r\n    display: inline-block;\r\n    width: 700px;\r\n    text-align: center;\r\n    vertical-align: middle;\r\n}\r\n.msg-html {\r\n   \r\n    word-wrap: break-word;\r\n    max-width:  600px;\r\n}\r\n</style>\r\n  ","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=a06c0a14&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=a06c0a14&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a06c0a14\",\n  null\n  \n)\n\nexport default component.exports"," <template>\r\n    <!-- 聊天区域 -->   \r\n      <div v-bind=\"message\" class=\"message\" >\r\n         <!-- 接收到的消息 -->\r\n          <virtual-list\r\n            ref = \"returnBottom\"\r\n            class=\"msg-list\"\r\n            :data-key=\"'seq'\"\r\n            :data-sources=\"historyMessageList\"\r\n            :data-component=\"itemComponent\"\r\n            :keeps =this.keeps\r\n            :estimate-size= this.estimateSize\r\n            @totop = \"totop\"\r\n            @tobottom = \"bottom\"\r\n            @scroll = \"onScroll\"\r\n            :start = 100  \r\n          />  \r\n          <el-badge v-if = \"msgNum > 0 && isBottom === false\" :value=msgNum  class=\"item msg-badge-down\">\r\n            <el-button @click = \"getLocation\" size=\"small\" icon = \"el-icon-arrow-down\">最新消息</el-button>\r\n          </el-badge>\r\n          <el-badge  v-if = \"msgNum > 0 && isBottom === true\" :value=msgNum \r\n            class=\"item msg-badge-up\">\r\n            <el-button  @click = \"getLocation\" size=\"small\" icon = \"el-icon-arrow-up\">最新消息</el-button>\r\n          </el-badge>\r\n          <MsgSend :proTitle = \"title\" @findNewMsg = \"findNewMsg\"/>     \r\n      </div>\r\n </template>\r\n  <script>\r\n  import virtualList from 'vue-virtual-scroll-list'\r\n\r\n  import MsgSend from '../MsgSend';\r\n  import Item from '../Item';\r\n    export default {\r\n      name: \"Message\",\r\n      data() {\r\n        return {  \r\n          historyMessageList:[],//获取在线消息\r\n          tabshow: false,//是否进行某种操作\r\n          room_id:this.$store.state.user.roomInfo.room_id,\r\n          isLoading :false,\r\n          isEnd :false,\r\n          page:0,\r\n          limit:20,\r\n          timer: 0,\r\n          itemComponent: Item,\r\n          estimateSize:50,\r\n          keeps:20,\r\n          msgNum:0, //最新消息树\r\n          isBottom:false,\r\n          totalNum:0\r\n\r\n        }\r\n      },\r\n      props:['title'],\r\n    \r\n      mounted(){\r\n\r\n        this.$store.state.message.historyMessageList= null\r\n        // window.addEventListener(\"scroll\", this.onScroll, true);\r\n        // 初始化条数\r\n        this.initLoadMsg()\r\n       \r\n      },\r\n      destroyed() { //离开这个界面之后，删除滚动事件，不然容易除bug\r\n        // window.removeEventListener('scroll', this.onScroll,true)\r\n      },\r\n    \r\n      methods:{\r\n        getLocation(e){\r\n          let div=this.$refs.returnBottom;\r\n          let location = this.keeps\r\n          if (this.totalNum > this.msgNum) {\r\n            location = this.totalNum-this.msgNum\r\n          }\r\n        \r\n          if (this.isBottom === true) {\r\n            location =  location -10\r\n          } \r\n          div.scrollToIndex(location);\r\n          this.msgNum = 0\r\n          this.isBottom = false\r\n        },\r\n        onScroll(e){\r\n          let div=this.$refs.returnBottom;\r\n          let getOffset = div.getOffset();\r\n\r\n          if (this.page >1 ) {\r\n            this.msgNum = 0;\r\n          }\r\n        },\r\n        findNewMsg(val) {\r\n            console.log(this.totalNum)\r\n            if (Object.keys(val).length > 0) {\r\n              this.$nextTick(() => {\r\n              if (val.sendUserId == val.userId ) {\r\n                let div=this.$refs.returnBottom;\r\n                div.reset()\r\n                div.scrollToBottom();\r\n                this.isBottom = true;\r\n                this.msgNum = 0;\r\n              } else {\r\n                // 记录其他用户发送的消息数量\r\n                this.isBottom = false\r\n                this.msgNum ++\r\n                \r\n\r\n              }\r\n              \r\n            })\r\n          }\r\n          \r\n      },\r\n      \r\n      totop(){\r\n        console.log(\"到顶了\");\r\n        this.getdata()\r\n\r\n      },\r\n      bottom(){\r\n        this.isBottom = true\r\n        let offTotal =  this.msgNum\r\n        if (offTotal >= 10) {\r\n          this.msgNum = offTotal\r\n        } else {\r\n          this.msgNum = 0\r\n        }\r\n        console.log(\"到底了\");\r\n      },\r\n      \r\n      getdata() {\r\n        if (!this.isEnd  && !this.isLoading ) {\r\n          this.initLoadMsg();\r\n        }  \r\n      },\r\n\r\n        initLoadMsg() {\r\n            this.page++;\r\n            this.isLoading = true;\r\n            let div = this.$refs.returnBottom;\r\n            \r\n            this.$store.dispatch('getGetMsg',{\r\n                  room_id:this.room_id,\r\n                  page:this.page,\r\n                  limit:this.limit\r\n                }).then(res => {\r\n                  this.$nextTick(()=>{\r\n                    this.isLoading = false;\r\n                    if(!res.msg) {\r\n                      this.isEnd = true;\r\n                    }\r\n                    if (this.page == 1) {\r\n                      //刷新滚动条到最近一页\r\n                      div.reset()\r\n                      div.scrollToBottom();\r\n                      this.isBottom = true\r\n                      this.msgNum = res.offTotal\r\n                    } \r\n                   \r\n\r\n                  })\r\n                  \r\n                });\r\n        }\r\n      },\r\n     \r\n      computed: {\r\n       \r\n        message: {\r\n          \r\n          get() {\r\n        \r\n            let historyMessageList = this.$store.state.message.historyMessageList || [];\r\n            let wsmessageList = this.$store.state.message.messageList; \r\n            this.historyMessageList = historyMessageList;\r\n            if (wsmessageList) {\r\n              this.historyMessageList.push(wsmessageList);\r\n              this.totalNum = this.historyMessageList.length\r\n            }  \r\n            console.log(this.historyMessageList);  \r\n          }\r\n        }\r\n      },\r\n      components: {\r\n        MsgSend,\r\n        virtualList\r\n\r\n      }\r\n    }\r\n  </script>\r\n  \r\n  <!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n  <style scoped>\r\n  \r\n  .msg-info {\r\n    height: 85px;\r\n  }\r\n \r\n  \r\n    .message {\r\n      position: relative;  \r\n    }\r\n    \r\n    .msg-list {\r\n    position: relative;\r\n    height: 800px;\r\n    min-height: 440px;\r\n    border-right: 1px solid #fff;\r\n    border-bottom-left-radius: 20px;\r\n    background-color: white;\r\n    overflow: auto;  \r\n    margin-right: 157px;\r\n\r\n    }\r\n\r\n    /* .msg {\r\n      position:relative;\r\n    } */\r\n\r\n    \r\n    .msg-frame {\r\n      margin-left: 40px;\r\n      min-width: 30px;\r\n      max-width: 500px;\r\n      min-height: 30px;\r\n      border: 1px;\r\n      border-radius: 10px;\r\n      background-color: white;\r\n      word-break: break-all;\r\n      word-wrap: break-word;\r\n      /*但在有些场景中，还需要加上下面这行代码*/\r\n      white-space: normal;\r\n      overflow: auto\r\n    }\r\n\r\n    .my-userInfo  .msg-frame {\r\n      margin-left: 140px;\r\n      text-align: right;\r\n      background-color: cornflowerblue;\r\n      \r\n    }\r\n\r\n  .userInfo-logo img {\r\n      height:40px;\r\n      width: 40px;\r\n      border-radius:20px;\r\n\r\n  }\r\n  .userInfo-msg textarea {\r\n    \r\n      width: 400px;\r\n      max-height: 50px;\r\n      padding: 10px ;\r\n      border-radius: 10px;\r\n      background-color: aquamarine;\r\n\r\n  }\r\n\r\n  .userInfo {\r\n      position: relative;\r\n      margin-left: 20px;\r\n  }\r\n\r\n  .userInfo-msg {\r\n      position: absolute;\r\n      top:-52px;\r\n      left: -13px;\r\n  }\r\n\r\n\r\n  .userInfo-logo img {\r\n      height:40px;\r\n      width: 40px;\r\n      border-radius:20px;\r\n      margin-top: 10px;\r\n\r\n  }\r\n  .userInfo-msg textarea {\r\n    \r\n      width: 400px;\r\n      max-height: 50px;\r\n      padding: 10px ;\r\n      border-radius: 10px;\r\n      background-color: aquamarine;\r\n\r\n  }\r\n\r\n\r\n\r\n  .my-userInfo {\r\n      position: relative;\r\n      margin-right: 20px;\r\n  }\r\n  .my-userInfo-msg {\r\n      position: absolute;\r\n      top: -12px;\r\n      right: 52px;\r\n  }\r\n\r\n  .my-userInfo h4 {\r\n      text-align: right;\r\n\r\n  }\r\n\r\n\r\n  .my-userInfo-logo img {\r\n      float: right;\r\n      height:40px;\r\n      width: 40px;\r\n      border-radius:20px;\r\n\r\n  }\r\n  .my-userInfo-msg textarea {\r\n    \r\n      width: 400px;\r\n      max-height: 50px;\r\n      padding: 10px ;\r\n      border-radius: 10px;\r\n      background-color: aquamarine;\r\n\r\n  }\r\n  .time-line {    \r\n    position: absolute;\r\n    display: inline-block;\r\n    width: 100%;\r\n    height: 20px;\r\n    text-align: center;\r\n    vertical-align: middle;\r\n  }\r\n  .msg-badge-down {\r\n    position: absolute;\r\n    right: 190px;\r\n    bottom: 1px;\r\n   \r\n   \r\n  }\r\n\r\n  .msg-badge-up {\r\n    position: absolute;\r\n    top: 10px;\r\n    right: 190px;\r\n    \r\n  }\r\n\r\n</style>\r\n    ","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=2150aadf&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=2150aadf&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2150aadf\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"userList\",staticStyle:{\"overflow\":\"auto\"}},[_c('ul',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.load),expression:\"load\"}],staticClass:\"list\",attrs:{\"infinite-scroll-disabled\":\"disabled\"}},_vm._l((_vm.data),function(val){return _c('li',{staticClass:\"list list-line\",attrs:{\"id\":\"userLine\"}},[_c('img',{staticClass:\"logo\",attrs:{\"id\":\"userLine\",\"src\":val.photo,\"alt\":\"\"}}),(val.is_online == 'online')?[_c('span',{staticClass:\"userStatus\",staticStyle:{\"background-color\":\"cadetblue\"}})]:_vm._e(),(val.is_online == 'offline')?[_c('span',{staticClass:\"userStatus\"})]:_vm._e(),_vm._v(\" \"+_vm._s(val.nick_name)+\" \")],2)}),0)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"," <template>\r\n\r\n  <div class=\"userList\"  style=\"overflow:auto\">\r\n        <ul\r\n          class=\"list\"\r\n          v-infinite-scroll=\"load\"\r\n          infinite-scroll-disabled=\"disabled\">\r\n          <li v-for=\"val in data\" class=\"list list-line\" id = \"userLine\" >\r\n            <img class=\"logo\" id = \"userLine\" :src=\"val.photo\" alt=\"\">\r\n            <template v-if=\"val.is_online == 'online'\">\r\n              <span class=\"userStatus\" style = \"background-color: cadetblue;\"></span>\r\n            </template>\r\n\r\n            <template v-if=\"val.is_online == 'offline'\">\r\n              <span class=\"userStatus\" ></span>\r\n            </template>\r\n\r\n           \r\n            {{ val.nick_name }}\r\n          </li>\r\n        </ul>\r\n  </div>\r\n </template>\r\n  <script> \r\n    export default {\r\n      data () {\r\n        return {\r\n          data :[],\r\n          count: 1,\r\n          noMore:false, //控制滚动禁用 \r\n          loading: false, //控制滚动条禁用\r\n          pages:0 , // 页码\r\n          size: 100, // 条数\r\n\r\n        }\r\n      },\r\n      props:['showUser'],\r\n      computed: {\r\n       \r\n        disabled () {\r\n          return this.loading || this.noMore\r\n        }\r\n      },\r\n      mounted(){\r\n          this.load();\r\n      },\r\n      methods: {\r\n       \r\n        load () {\r\n          this.loading = true;\r\n          this.pages += 1 // 每次滚动加1\r\n          this.getUserList();\r\n        },\r\n       \r\n        // 获取数据\r\n        getUserList() {\r\n          let datas = {'pages':this.pages,'size':this.size};\r\n          //派发一个action||获取聊天室的用户列表\r\n          this.$store.dispatch(\"getRoomUserList\",datas).then (res => {\r\n            let list = res.userList;\r\n            \r\n           \r\n            for (let i = 0; i < list.length; i++) {             \r\n              this.data.push(list[i]);\r\n            }\r\n            // 如果请求回来的数据小于Size，则说明数据到底了。\r\n            if (list.length < this.size) {\r\n              this.noMore = true;\r\n            }\r\n            // 避免数据总条数是pageSize的倍数时，数据到底还会请求一次。\r\n            if (this.data.length === this.$store.state.user.roomUserList.total) {\r\n              this.noMore = true;\r\n            }\r\n            this.loading = false;\r\n\r\n          })\r\n          }\r\n\r\n      }\r\n    }\r\n  </script>\r\n  \r\n  <!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n  <style scoped>\r\n  .logo {\r\n    width: 30px;\r\n    height: 30px;\r\n    border-radius: 15px;\r\n    vertical-align: middle;\r\n  }\r\n\r\n  .list {\r\n    position:relative;\r\n    cursor: pointer;\r\n  }\r\n  .list-line:hover {background-color: lightblue;}\r\n\r\n.userStatus{\r\n  position: absolute;\r\n  z-index: 1;\r\n  top: 14px;\r\n  left: 18px;\r\n  width: 10px;\r\n  height: 10px;\r\n  border-radius: 5px;\r\n  background-color: grey;\r\n}\r\n\r\n.userList {\r\n    position: absolute;\r\n    top: 50px;\r\n    right: 0px;\r\n    width: 155px;\r\n    height: 800px;\r\n    min-height: 600px;\r\n    float: right;\r\n    border: 1px solid #fff;\r\n    /* border-top-right-radius: 20px; */\r\n    border-bottom-right-radius: 20px;\r\n    background-color: rgba(245,245,245,1.7);\r\n\r\n\r\n}\r\n.userList ul {\r\n    list-style: none;\r\n    overflow: auto;\r\n}\r\n\r\n\r\n\r\n.userList ul li {\r\n    margin: 10px 1px;\r\n}\r\n\r\n\r\n    \r\n  </style>\r\n  ","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0a4f304c&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=0a4f304c&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a4f304c\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div class=\"wrap\">\r\n      <!-- 路由组件出口的地方 -->\r\n    \r\n      <!--头部 -->\r\n       <MsgTop/>\r\n      \r\n          <!--用户基本信息 -->\r\n          <MsgBase :userStatus=\"userStatus\"/>\r\n          <!-- 聊天记录 -->\r\n          <Messages/>\r\n          <!-- 用户信息 -->\r\n          <UserList :showUser=\"true\" />\r\n            \r\n    \r\n        <router-view></router-view>\r\n    </div>\r\n    \r\n\r\n</template>\r\n\r\n<script>\r\n//引入依赖\r\nimport MsgTop from './MsgTop';\r\nimport MsgBase from './MsgBase';\r\nimport Messages from './Messages';\r\nimport UserList from './UserList';\r\n\r\n\r\n\r\nexport default {\r\n  name: \"\",\r\n  components: {\r\n    MsgTop,\r\n    MsgBase, \r\n    Messages,  \r\n    UserList,\r\n  },\r\n  data() {\r\n    return {\r\n      \"user_id\":this.$store.state.user.userInfo.user_id,\r\n      \"room_id\":this.$store.state.user.roomInfo.room_id,\r\n      \"userStatus\":\"offline\"\r\n\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$socket.open() \r\n    window.addEventListener('visibilitychange',this.visibilitychange,true);\r\n    window.addEventListener('beforeunload', e => this.beforeunloadHandler(e))  \r\n    window.addEventListener(\"blur\", this.onblur,true);\r\n    window.addEventListener(\"focus\", this.onfocus,true);   \r\n\r\n    \r\n  },\r\n  beforeDestroy () {\r\n    this.$socket.close()\r\n    window.removeEventListener('visibilitychange', this.visibilitychange,true)\r\n    window.removeEventListener('beforeunload', e => this.beforeunloadHandler(e))\r\n    window.removeEventListener(\"focus\", this.onfocus,true);   \r\n    window.removeEventListener(\"blur\", this.onblur,true);\r\n\r\n  },\r\n  sockets: {\r\n    async connecting () {\r\n      console.log(\"Socket 正在连接\");\r\n    },\r\n    async disconnect (reason) {\r\n      console.log(\"Socket 断开\",reason);\r\n      console.log(\"disconnect是否连接服务端：\",this.$socket.connected); // false\r\n      if (this.$socket.connected === false) {\r\n          this.userStatus = \"offline\"  \r\n      }         \r\n    },\r\n    async connect_error (error) {\r\n      console.log(\"Socket 连接失败\",error);\r\n      // alert(\"通信连接失败，请尝试刷新页面！！！\")\r\n      \r\n      // this.handleClose(\"服务器连接失败！！！\");\r\n      // this.$socket.close()\r\n      console.log(\"connect_error是否连接服务端：\",this.$socket.connected); // false\r\n      if (this.$socket.connected === false) {\r\n          this.userStatus = \"offline\"\r\n\r\n      }\r\n\r\n    },\r\n    async connect () {\r\n      console.log(\"Socket 连接成功\");\r\n      console.log(\"connect是否连接服务端：\",this.$socket.connected); // false\r\n      if (this.$socket.connected === true) {\r\n          this.userStatus = \"online\"\r\n\r\n      }\r\n\r\n    },\r\n    async error (error) {\r\n        console.log(\"Socket错误:\",error);\r\n        this.handleClose(\"服务器出错，请联系管理员！！！\");\r\n    }\r\n       \r\n},\r\nmethods: {\r\n  handleClose(error){\r\n  \r\n      this.$confirm(error,'错误',{\r\n        confirmButtonText: '确定',\r\n          type: 'error'\r\n\r\n      })\r\n        .then(_ => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: error\r\n          });\r\n        })\r\n        .catch(_ => {});\r\n  },\r\n  onfocus(e){\r\n      console.log('得到焦点');\r\n      \r\n      this.$store.dispatch(\"getTitle\", {\r\n          \"user_id\":this.$store.state.user.userInfo.user_id,\r\n          \"contactList\":\"\"\r\n        })\r\n    },\r\n    visibilitychange(e){\r\n        console.log(document.visibilityState);\r\n        let state = document.visibilityState\r\n        if(state == 'hidden'){\r\n            console.log(document.visibilityState,'用户离开了');\r\n        }\r\n        if(state == 'visible'){\r\n            console.log(document.visibilityState,'回来了');       \r\n        }\r\n    },\r\n    beforeunloadHandler(e) {\r\n      e = e || window.event\r\n      if (e) {\r\n        e.returnValue = '关闭提示'\r\n      }\r\n      return '关闭提示'\r\n    },\r\n    \r\n    onblur(e) {\r\n      console.log('失去焦点');\r\n    }\r\n}\r\n\r\n \r\n}\r\n\r\n</script>\r\n\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=73165085&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Login from '@/pages/Login'\r\nimport Home  from '@/pages/Home'\r\n\r\nexport default [\r\n    /**\r\n     * 登录\r\n     */\r\n    {\r\n        path: '/login',\r\n        name:'Login',\r\n        component: Login,\r\n        meta: { requiresGuest: true }, // 需要未登录\r\n    },\r\n    /**\r\n     * 首页\r\n     */\r\n    {\r\n        path: '/',\r\n        name:'Home',\r\n        component: Home,\r\n        meta: { requiresAuth: true }, // 需要身份验证\r\n    }\r\n]","//存储token\r\nexport const setToken = (token) => {\r\n  localStorage.setItem(\"TOKEN\", token);\r\n};\r\n//获取token\r\nexport const getToken = () => {\r\n  return localStorage.getItem(\"TOKEN\");\r\n};\r\n\r\n//清除本地存储的token\r\nexport const removeToken=()=>{\r\n   localStorage.removeItem(\"TOKEN\");\r\n}\r\n","//对于axios进行二次封装\r\nimport axios from \"axios\";\r\nimport nprogress, { done } from \"nprogress\";\r\n//在当前模块中引入store\r\nimport store from '@/store';\r\n//如果出现进度条没有显示：一定是你忘记了引入样式了\r\nimport \"nprogress/nprogress.css\";\r\nimport { setToken, getToken,removeToken} from \"@/utils/token\";\r\n\r\n//底下的代码也是创建axios实例\r\nlet requests = axios.create({\r\n  //基础路径\r\n  baseURL: \"/api\",\r\n  //请求不能超过10s\r\n  timeout: 20000,\r\n});\r\n\r\n//请求拦截器----在项目中发请求（请求没有发出去）可以做一些事情\r\nrequests.interceptors.request.use(\r\n  (config) => {\r\n    //需要携带token带给服务器\r\n    let token = store.state.user.token\r\n    if(token){\r\n      config.headers.Authorization = 'Bearer'+' '+ token;\r\n    }\r\n    nprogress.start();\r\n    return config;\r\n  },(err) => {\r\n    console.log(\"服务器请求数据失败\",err)\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n\r\n//响应拦截器----当服务器手动请求之后，做出响应（相应成功）会执行的\r\nrequests.interceptors.response.use(\r\n  (res) => {\r\n    let data = res.data;\r\n    console.log(\"回调\",data);\r\n    //进度条结束\r\n    nprogress.done();\r\n    if (data.code === 10000){   \r\n        //相应成功做的事情\r\n        return data;\r\n    } else {\r\n      // token 校验失效\r\n      if (data.code === 500) {\r\n        removeToken();\r\n        this.$router.push({path:'/login'})\r\n        // return alert(data.msg)\r\n      }\r\n      return data;\r\n    }\r\n     \r\n   \r\n  },\r\n  (err) => {\r\n    removeToken();\r\n    console.log(\"服务器响应数据失败\",err)\r\n    this.$router.push({path:'/login'})\r\n    return false\r\n  }\r\n);\r\n//最终需要对外暴露（不对外暴露外面模块没办法使用）\r\n//这里的代码是暴露一个axios实例\r\nexport default requests;\r\n","//对于axios进行二次封装\r\nimport axios from \"axios\";\r\nimport nprogress from \"nprogress\";\r\n//如果出现进度条没有显示：一定是你忘记了引入样式了\r\nimport \"nprogress/nprogress.css\";\r\n//底下的代码也是创建axios实例\r\nlet requests = axios.create({\r\n  //基础路径\r\n  baseURL: \"/mock\",\r\n  //请求不能超过5S\r\n  timeout: 5000,\r\n});\r\n\r\n//请求拦截器----在项目中发请求（请求没有发出去）可以做一些事情\r\nrequests.interceptors.request.use((config) => {\r\n  //现在的问题是config是什么?配置对象\r\n  //可以让进度条开始动\r\n  nprogress.start();\r\n  return config;\r\n});\r\n\r\n//响应拦截器----当服务器手动请求之后，做出响应（相应成功）会执行的\r\nrequests.interceptors.response.use(\r\n  (res) => {\r\n    //进度条结束\r\n    nprogress.done();\r\n    //相应成功做的事情\r\n    return res.data;\r\n  },\r\n  (err) => {\r\n    console.log(\"服务器响应数据失败\", err)\r\n    alert(\"服务器响应数据失败\");\r\n  }\r\n);\r\n//最终需要对外暴露（不对外暴露外面模块没办法使用）\r\n//这里的代码是暴露一个axios实例\r\nexport default requests;\r\n","import requests from \"./ajax\";\r\nimport mockRequests  from \"./mockAjax\";\r\n//登录\r\n//URL:/api/v1/login  method:post phone password\r\nexport const reqUserLogin = (data)=>requests({url:'/v1/login',data,method:'post'});\r\n// 授权\r\nexport const reqAuth = (type)=>requests({url:`/v1/auth/gitee/${type}`,type,method:'get'});\r\n// 第三方登录\r\nexport const reqGiteeLogin = (data)=>requests({url:'/v1/gitee/login',data,method:'post'});\r\n\r\n//聊天室的基本信息\r\n//URL:/api/v1/room/info  method:post phone password\r\nexport const reqRoomInfo = ()=>requests({url:'/v1/room/info',method:'post'});\r\n\r\n// 聊天室的用户列表\r\n//URL:/api/v1/login  method:post phone password\r\nexport const reqRoomUserList = (data)=>requests({url:'/v1/room/user/list',data,method:'post'});\r\n\r\n\r\n//添加登录日志\r\n// export const reqUerLoginLogs = ()=>requests({url:'/v1/add/login/logs',method:'post'});\r\n//reqLogout 登出\r\nexport const reqLogout = ()=>requests({url:'/v1/log/out',method:'post'});\r\n// 所有消息\r\nexport const reqGetMsg = (data)=>requests({url:'/v1/user/msg',data,method:'post'});\r\n// 上传音频 /upload/audio\r\nexport const reqUploadAudio =  (data)=>requests({url:'/v1/upload/audio',data,method:'post'});\r\n","\r\n\r\n// 导入api\r\nimport {\r\n    reqUserLogin,\r\n    reqRoomInfo,\r\n    reqRoomUserList,\r\n    reqLogout,\r\n    reqAuth,\r\n    reqGiteeLogin\r\n\r\n} from \"@/api\";\r\n\r\nimport { setToken, getToken,removeToken} from \"@/utils/token\";\r\nimport { setCache, getCache,removeCache} from \"@/utils/cookie\";\r\n//登录与注册的模块\r\nconst state = {\r\n  code: \"\",\r\n  userIsOnLine:\"offline\",\r\n  token: getToken(),\r\n  userInfo: {},\r\n  roomInfo:{},\r\n  roomUserList:[],\r\n  isAuthLogin:false\r\n};\r\n// \r\nconst mutations = {\r\n    USERLOGIN(state, token) {\r\n        state.token = token;\r\n    },\r\n    GETUSERINFO(state, userInfo) {\r\n        state.userInfo = userInfo\r\n        console.log(userInfo.is_online);\r\n        state.userIsOnLine = userInfo.is_online\r\n    },  \r\n   \r\n    GETROOMINFO(state, roomInfo) {\r\n        state.roomInfo = roomInfo;\r\n    },  \r\n    ROOMUSERLIST(state, data) {\r\n        state.roomUserList = data\r\n    },\r\n    ISAUTHLOGIN(state, data) {\r\n        state.isAuthLogin = data\r\n    }\r\n\r\n};\r\n\r\nconst actions = {\r\n\r\n    // 登录业务\r\n    async userLogin({ commit }, data) {\r\n        // 请求参数\r\n        let result = await reqUserLogin(data);\r\n        if (result.code === 10000) {\r\n            // 添加登录日志\r\n             \r\n            //用户已经登录成功且获取到token\r\n            commit(\"USERLOGIN\", result.data.token);\r\n            //持久化存储token\r\n            setToken(result.data.token);\r\n        } \r\n        return result;\r\n    },\r\n\r\n    /**\r\n     * gitee 登录\r\n     * @param {*} param0 \r\n     * @param {*} data \r\n     * @returns \r\n     */\r\n    async giteeLogin({ commit }, data) {\r\n        let result = await reqGiteeLogin(data);\r\n        if (result.code == 10000) {\r\n            console.log(result);\r\n            //用户已经登录成功且获取到token\r\n            commit(\"USERLOGIN\", result.data.token);\r\n            //持久化存储token\r\n            setToken(result.data.token);\r\n            //删除auth\r\n            removeCache(\"isAuthLogin\");\r\n           \r\n        } \r\n        return result;\r\n\r\n    },\r\n\r\n    /**\r\n     * 授权\r\n     * @param {*} param0 \r\n     * @param {*} data \r\n     * @returns \r\n     */\r\n    async authLogin({ commit }, data) {\r\n        let result = await reqAuth(data);\r\n        if (result.code == 10000) {\r\n            // 设置 Auth 标识\r\n            setCache(\"isAuthLogin\",true)\r\n            return result.data;\r\n        } else {\r\n            return false;\r\n        }\r\n\r\n    },\r\n    \r\n\r\n    // 获取聊天室中用户列表\r\n    async getRoomUserList({commit}, data) {\r\n        // 请求参数\r\n        let result = await reqRoomUserList(data);\r\n        if (result.code == 10000) {\r\n            commit(\"ROOMUSERLIST\",result.data);\r\n            return result.data;\r\n\r\n        } \r\n\r\n    },\r\n    //获取聊天室信息\r\n    async getRoomInfo({ commit }) {\r\n        let result = await reqRoomInfo();\r\n        \r\n        let code = result?.code;\r\n        if (code === 10000) {       \r\n            let list = result?.data;\r\n            //  //提交用户信息\r\n            commit(\"GETUSERINFO\", list?.userInfo);\r\n            // 提交 聊天室的基本信息\r\n            commit(\"GETROOMINFO\", list?.roomInfo);\r\n            \r\n            return true;\r\n        }\r\n    },\r\n    //退出登录\r\n    async userLogout({commit}) {\r\n        //只是向服务器发起一次请求，通知服务器清除token\r\n        let result = await reqLogout();\r\n        //action里面不能操作state，提交mutation修改state\r\n        if(result.code === 10000){\r\n            // 删除 token\r\n            removeToken();\r\n            // 删除授权\r\n            removeCache('isAuthLogin')\r\n            commit(\"USERLOGIN\",false);\r\n            return true;\r\n        }\r\n  },\r\n\r\n\r\n\r\n}\r\n\r\nconst getters = {\r\n\r\n};\r\nexport default {\r\n  state,\r\n  mutations,\r\n  actions,\r\n  getters,\r\n};\r\n\r\n\r\n","\r\n// 导入api\r\nimport {\r\n    reqGetMsg,\r\n    reqUploadAudio\r\n} from \"@/api\";\r\nimport { setCache, getCache,removeCache} from \"@/utils/cache\";\r\nimport store from \"@/store\";\r\n\r\nconst state = {\r\n    title: \"闪电\",\r\n    messageList:null,\r\n    historyMessageList:null,\r\n    offTotal:0\r\n};\r\n// \r\nconst mutations = {\r\n    GETOFFMSGTOTAL(state, data) {\r\n        state.offTotal = data\r\n    },\r\n   \r\n    GETMESSAGELIST(state, data) {      \r\n        state.messageList = data\r\n    },\r\n    GETHISTORYMESSAGELIST(state,data) {   \r\n        // console.log(getCache('historyMessageList'));\r\n        if(Object.keys(data).length > 0){\r\n            \r\n            state.historyMessageList = data\r\n        }\r\n        \r\n    },\r\n    GETTITLE(state,data) {\r\n        state.title = data\r\n    }\r\n\r\n};\r\n\r\nconst actions = {\r\n    /**\r\n     * 获取title 状态\r\n     */\r\n    async getTitle({commit}, data){\r\n        let contactList = data.contactList.split(',')     \r\n        let title = \"闪电\"\r\n        let context = \"新消息\"    \r\n        let user_id = store.state.user.userInfo.user_id;\r\n        if (contactList.length > 0 && contactList.includes(user_id.toString()) === true) {\r\n            context = \"有人@我\"\r\n        }\r\n        if (user_id == data.user_id) {\r\n            commit(\"GETTITLE\",title);\r\n            return title;\r\n        }\r\n        if (Object.keys(data).length > 0) {\r\n            title = '【'+ context + '】' + '闪电'\r\n        }\r\n        \r\n        commit(\"GETTITLE\",title);\r\n        return title;\r\n        \r\n\r\n    },\r\n   \r\n    /**\r\n     * 获取所有消息\r\n     * @param {*} param0 \r\n     * @param {*} data \r\n     * @returns \r\n     */\r\n    async getGetMsg({commit}, data) {\r\n        // 请求参数\r\n        let result = await reqGetMsg(data);\r\n        if (result.code === 10000) {\r\n            \r\n            let list = result.data.list;\r\n\r\n            const user_id = store.state.user.userInfo.user_id;\r\n            let oldMsg = state.historyMessageList || []; \r\n            \r\n            var tag = 0; // 0 自己发的  1 被人发的\r\n            for (var i = 0; i < list.length; i++) {\r\n                \r\n                if (list[i].msg_form) {\r\n                    if (user_id != list[i].msg_form) {\r\n                        tag = 1;\r\n                    } else {\r\n                        tag = 0;\r\n                    }\r\n                    // url的处理\r\n                    let msg = list[i].msg_content;\r\n                    let pattern = /\\b(https?:\\/\\/[^\\s]+)/g;\r\n                    let matches = msg.match(pattern); \r\n                    if (matches !== null) {   \r\n                       \r\n                        for (var urlKey=0;urlKey < matches.length;urlKey++) {\r\n                        \r\n                            msg = msg.replace(matches[urlKey], `<a href=${matches[urlKey]}>${matches[urlKey]}</a>`);\r\n                            \r\n                        }\r\n                    }\r\n                    \r\n                    let messageList = {\r\n                        \"user_id\": list[i].msg_form,\r\n                        \"tag\":tag,\r\n                        \"nick_name\":list[i].nick_name,\r\n                        \"msg\":msg,\r\n                        \"room_id\":list[i].room_id,\r\n                        \"seq\":list[i].seq,\r\n                        \"send_time\":list[i].send_time,\r\n                        \"userLogo\":list[i].photo,\r\n                        \"content_type\":list[i].content_type,\r\n                    }\r\n                    \r\n                    oldMsg.unshift(messageList)  \r\n                                 \r\n                }\r\n\r\n            }\r\n\r\n            let total = result.data.offTotal\r\n            // if (total >= 0) {\r\n            //     commit(\"GETOFFMSGTOTAL\",total);\r\n            // }\r\n           \r\n\r\n            commit(\"GETHISTORYMESSAGELIST\",oldMsg);\r\n\r\n            //用户已经登录成功且获取到token \r\n            return {msg:oldMsg,offTotal:total};\r\n        } \r\n\r\n    },\r\n    async uploadAudio({commit}, data) {\r\n        let result = await reqUploadAudio(data);\r\n        console.log(result);\r\n        if (result.code === 10000) {\r\n            return result.data;\r\n        } \r\n    },\r\n\r\n    async getMessage({commit}, data){\r\n        console.log(\"服务端发过来了一个数据:\",data);\r\n        if ( Object.keys(data).length > 0) {\r\n            if (data.code == 20014 ) {\r\n                next('/login');\r\n\r\n            }\r\n           \r\n            const user_id = store.state.user.userInfo.user_id;\r\n            \r\n            var tag = 0; // 0 自己发的  1 被人发的\r\n            if (user_id !== data.user_id ) {\r\n              tag = 1;\r\n            }\r\n            let msg = data.sensitiveMsg;\r\n            let pattern = /\\b(https?:\\/\\/[^\\s]+)/g;\r\n            let matches = msg.match(pattern); \r\n            if (matches !== null) {   \r\n                       \r\n                for (var urlKey=0;urlKey < matches.length;urlKey++) {\r\n             \r\n                    msg = msg.replace(matches[urlKey], `<a href=${matches[urlKey]}>${matches[urlKey]}</a>`);\r\n                    \r\n                }\r\n            }\r\n            \r\n            let messageList = {\r\n                \"user_id\": data.user_id,\r\n                \"tag\":tag,\r\n                \"nick_name\":data.nick_name,\r\n                \"msg\":msg,\r\n                \"room_id\":data.room_id,\r\n                \"seq\":data.seq,\r\n                \"send_time\":data.send_time,\r\n                \"userLogo\":data.userLogo,\r\n                \"content_type\":data.content_type,\r\n            }\r\n            // 聊天记录\r\n            commit(\"GETMESSAGELIST\", messageList)\r\n\r\n            return true;\r\n        } \r\n    \r\n    },\r\n \r\n\r\n}\r\n\r\nconst getters = {\r\n\r\n};\r\nexport default {\r\n  state,\r\n  mutations,\r\n  actions,\r\n  getters,\r\n};\r\n\r\n\r\n","//引入Vuex -----相当于咱们最大的仓库\r\nimport Vuex from \"vuex\";\r\n//引入Vue\r\nimport Vue from \"vue\";\r\n//使用插件\r\nVue.use(Vuex);\r\n\r\nimport user from \"./user\";\r\nimport message from \"./message\";\r\n\r\n\r\n//需要暴露Vuex.Store类的实例(你需要暴露这个类的实例，如果你不对外暴露，外部是不能使用的)\r\nexport default new Vuex.Store({\r\n    //模块：把小仓库进行合并变为大仓库\r\n    modules: {\r\n      user,\r\n      message,\r\n    },\r\n  });","//引入vue-router路由插件\r\nimport VueRouter from \"vue-router\";\r\n//引入Vue\r\nimport Vue from \"vue\";\r\nimport routes from \"./routes\";\r\n//使用插件\r\nVue.use(VueRouter);\r\n\r\nimport VueSocketIO from 'vue-socket.io' ;\r\nimport Manager from \"socket.io-client\";\r\n//引入store\r\nimport store from \"@/store\";\r\n//需要重写VueRouter.prototype原型对象身上的push|replace方法\r\n//先把VueRouter.prototype身上的push|replace方法进行保存一份\r\nlet originPush = VueRouter.prototype.push;\r\nlet originReplace = VueRouter.prototype.replace;\r\n//重写VueRouter.prototype身上的push方法了\r\nVueRouter.prototype.push = function(location, resolve, reject) {\r\n  //第一个形参：路由跳转的配置对象（query|params）\r\n  //第二个参数：undefined|箭头函数（成功的回调）\r\n  //第三个参数:undefined|箭头函数（失败的回调）\r\n  if (resolve && reject) {\r\n    //push方法传递第二个参数|第三个参数（箭头函数）\r\n    //originPush：利用call修改上下文，变为(路由组件.$router)这个对象，第二参数：配置对象、第三、第四个参数：成功和失败回调函数\r\n    originPush.call(this, location, resolve, reject);\r\n  } else {\r\n    //push方法没有产地第二个参数|第三个参数\r\n    originPush.call(\r\n      this,\r\n      location,\r\n      () => {},\r\n      () => {}\r\n    );\r\n  }\r\n};\r\n//重写VueRouter.prototype身上的replace方法了\r\nVueRouter.prototype.replace = function(location, resolve, reject) {\r\n  if (resolve && reject) {\r\n    originReplace.call(this, location, resolve, reject);\r\n  } else {\r\n    originReplace.call(\r\n      this,\r\n      location,\r\n      () => {},\r\n      () => {}\r\n    );\r\n  }\r\n};\r\n//对外暴露VueRouter类的实例\r\nlet router = new VueRouter({\r\n  mode : 'history',\r\n  //配置路由\r\n  //第一:路径的前面需要有/(不是二级路由)\r\n  //路径中单词都是小写的\r\n  //component右侧V别给我加单引号【字符串：组件是对象（VueComponent类的实例）】\r\n  routes,\r\n  //滚动行为\r\n  scrollBehavior(to, from, savedPosition) {\r\n    //返回的这个y=0，代表的滚动条在最上方\r\n    return { y: 0 };\r\n  },\r\n});\r\n\r\n//全局守卫：前置守卫（在路由跳转之间进行判断）\r\nrouter.beforeEach(async (to, from, next) => {\r\n   //to:获取到要跳转到的路由信息\r\n   //from：获取到从哪个路由跳转过来来的信息\r\n   //next: next() 放行  next(path) 放行  \r\n   //方便测试 统一放行\r\n  //  next();\r\n  //获取仓库中的token-----可以确定用户是登录了\r\n   let token  = store.state.user.token;\r\n\r\n   //用户登录了\r\n   if(token != null && to.meta.requiresAuth ){\r\n     //已经登录而且还想去登录------不行\r\n        try {\r\n          // 获取房间信息\r\n          await store.dispatch('getRoomInfo');\r\n          let room_id = store.state.user.roomInfo.room_id\r\n          // 注册 socket\r\n          Vue.use(new VueSocketIO({\r\n            debug: true,\r\n            // 测试 http://192.168.1.108:9502\r\n            connection: Manager.connect(\"http://127.0.0.1:9502\", {\r\n              connectionStateRecovery: {\r\n                // the backup duration of the sessions and the packets\r\n                maxDisconnectionDuration: 2 * 60 * 1000,\r\n                // whether to skip middlewares upon successful recovery\r\n                skipMiddlewares: true,\r\n              },\r\n                reconnectionDelayMax: 100,\r\n                transports: [\"websocket\"],//默认使用的请求方式\r\n              \r\n                query: {\r\n                  \"token\":store.state.user.token,\r\n                  \"room\": room_id\r\n               },\r\n                autoConnect: false,//是否自动连接 \r\n              })\r\n            \r\n          }));\r\n          \r\n          next();\r\n        } catch (error) {\r\n          \r\n          //token失效从新登录\r\n          await store.dispatch('userLogout');\r\n          next({ name: 'Login' })\r\n        }\r\n       \r\n   }else{\r\n      \r\n      let toPath = to.path;\r\n      \r\n      if(!to.meta.requiresGuest){\r\n        //把未登录的时候向去而没有去成的信息，存储于地址栏中【路由】\r\n        next('/login?redirect='+toPath);\r\n      } else if(to.name == 'Login') {\r\n        next();\r\n      }\r\n       \r\n    \r\n   }\r\n});\r\n\r\nexport default router;\r\n","import Vue from 'vue';\r\n\r\nimport ElementUI from 'element-ui';\r\nimport 'element-ui/lib/theme-chalk/index.css';\r\nimport VueAudio from 'vue-audio-better'\r\nimport MetaInfo from 'vue-meta-info';\r\nimport VueCookies from 'vue-cookies'\r\nimport AudioVisual from 'vue-audio-visual'\r\nimport App from './App.vue';\r\n//引入路由相关文件\r\nimport router from \"@/router\";\r\n//引入仓库进行注册\r\nimport store from \"@/store\";\r\n\r\nimport { Button,MessageBox} from 'element-ui';\r\n//引入表单校验插件\r\n// import \"@/plugins/validate\";\r\n\t\r\n//注册全局组件\r\nVue.component(Button.name,Button);\r\n\r\n//ElementUI注册组件的时候，还有一种写法，挂在原型上\r\nVue.prototype.$msgbox = MessageBox;\r\nVue.prototype.$alert = MessageBox.alert;\r\n//统一引入\r\nimport * as API from '@/api';\r\n//引入表单校验插件\r\nVue.config.productionTip = false\r\nVue.use(ElementUI);\r\nVue.use(VueAudio);\r\nVue.use(MetaInfo);\r\nVue.use(VueCookies)\r\nVue.use(AudioVisual)\r\n\r\n\r\nnew Vue({\r\n  render: h => h(App),\r\n  //全局事件总线$bus配置\r\n  beforeCreate() {\r\n    Vue.prototype.$bus = this;\r\n    Vue.prototype.$API = API;\r\n  },\r\n  //router进行注册\r\n  router,\r\n  //注册store\r\n  store\r\n}).$mount('#app')\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdO = {};","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkwebchat_view\"] = self[\"webpackChunkwebchat_view\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(4029); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_vm","this","_c","_self","staticRenderFns","name","components","metaInfo","title","$store","state","message","meta","content","link","rel","href","data","mounted","destroyed","methods","component","staticClass","_v","ref","attrs","ruleForm","rules","required","type","model","value","login","callback","$$v","$set","expression","min","password","on","$event","submitForm","getAuthLogin","setCache","Cookies","set","getCache","get","removeCache","remove","oauthToken","isAuthLogin","console","log","dispatch","then","res","code","$alert","$router","push","catch","error","url","length","window","location","origin","host","formName","$refs","validate","valid","userStatus","_s","roomName","isOnlineNum","user","roomInfo","countOnline","userLogo","staticStyle","_e","nickName","require","logout","userInfo","nick_name","photo","user_id","room_id","props","$confirm","_","$socket","close","$message","_b","historyMessageList","itemComponent","keeps","estimateSize","totop","bottom","onScroll","msgNum","isBottom","getLocation","findNewMsg","directives","rawName","showDialog","selectMsg","toogleDialogEmoji","audioData","members","filterMatch","deleteMatch","getValue","scopedSlots","_u","key","fn","s","domProps","item","userList","indexOf","_k","keyCode","msgSend","apply","arguments","getPermission","isShowPermission","startRecorder","outPlay","startEnd","countdownimes","satrtTime","lamejs","recorder","Recorder","sampleBits","sampleRate","numChannels","compiling","drawRecordId","oCanvas","ctx","drawPlayId","pCanvas","pCtx","endTime","startCanvas","document","getElementById","getContext","stopRecorder","start","drawRecord","getRecorder","resumeRecorder","resume","pauseRecorder","pause","cancelAnimationFrame","stop","playRecorder","play","drawPlay","pausePlayRecorder","pausePlay","resumePlayRecorder","resumePlay","stopPlayRecorder","stopPlay","destroyRecorder","destroy","toltime","parseInt","duration","fileSize","getWAV","mp3Blob","convertToMp3","uploadWAVData","downPCM","downloadPCM","downWAV","downloadWAV","wavBlob","formData","FormData","fileOfBlob","File","Date","getTime","append","$emit","getMp3Data","download","wavDataView","wav","WavHeader","readHeader","channels","mp3enc","Mp3Encoder","result","getChannelData","buffer","leftData","left","Int16Array","byteLength","rightData","right","remaining","maxSamples","i","subarray","mp3buf","encodeBuffer","enc","flush","Blob","Math","ceil","countdownime","requestAnimationFrame","dataArray","getRecordAnalyseData","bufferLength","fillStyle","fillRect","width","height","lineWidth","strokeStyle","beginPath","sliceWidth","x","v","y","moveTo","lineTo","stroke","getPlayAnalyseData","VEmojiPicker","Audio","At","text","drawer","direction","audio","showUser","sumNoticeOtherUser","countStr","contactList","sockets","roomCallback","computed","roomUserList","chunk","toLowerCase","suffix","filter","trim","val","tihs","alert","path","file","lastEditRange","input","selection","getSelection","focus","range","rangeCount","getRangeAt","removeAllRanges","addRange","textNode","startContainer","rangeStartOffset","startOffset","insertData","setStart","collapse","open","innerText","messgae","content_type","undefined","msgData","volatile","emit","index","source","send_time","class","tag","preventDefault","stopPropagation","clickMsg","msg","progress","is_stop","curr","volume","balance","Number","Object","default","tabshow","isLoading","isEnd","page","limit","timer","Item","totalNum","initLoadMsg","e","div","returnBottom","scrollToIndex","getOffset","keys","$nextTick","sendUserId","userId","reset","scrollToBottom","getdata","offTotal","wsmessageList","messageList","MsgSend","virtualList","load","_l","is_online","count","noMore","loading","pages","size","disabled","getUserList","datas","list","total","MsgTop","MsgBase","Messages","UserList","addEventListener","visibilitychange","beforeunloadHandler","onblur","onfocus","beforeDestroy","removeEventListener","connecting","disconnect","reason","connected","connect_error","connect","handleClose","confirmButtonText","visibilityState","event","returnValue","Login","requiresGuest","Home","requiresAuth","setToken","token","localStorage","setItem","getToken","getItem","removeToken","removeItem","requests","axios","create","baseURL","timeout","interceptors","request","use","config","store","headers","Authorization","nprogress","err","Promise","reject","response","reqUserLogin","method","reqAuth","reqGiteeLogin","reqRoomInfo","reqRoomUserList","reqLogout","reqGetMsg","reqUploadAudio","userIsOnLine","mutations","USERLOGIN","GETUSERINFO","GETROOMINFO","ROOMUSERLIST","ISAUTHLOGIN","actions","userLogin","commit","giteeLogin","authLogin","getRoomUserList","getRoomInfo","userLogout","getters","GETOFFMSGTOTAL","GETMESSAGELIST","GETHISTORYMESSAGELIST","GETTITLE","getTitle","split","context","includes","toString","getGetMsg","oldMsg","msg_form","msg_content","pattern","matches","match","urlKey","replace","seq","unshift","uploadAudio","getMessage","next","sensitiveMsg","Vue","Vuex","modules","VueRouter","originPush","prototype","originReplace","resolve","call","router","mode","routes","scrollBehavior","to","from","savedPosition","beforeEach","async","VueSocketIO","debug","connection","Manager","connectionStateRecovery","maxDisconnectionDuration","skipMiddlewares","reconnectionDelayMax","transports","query","autoConnect","toPath","Button","$msgbox","MessageBox","productionTip","ElementUI","VueAudio","MetaInfo","VueCookies","AudioVisual","h","App","beforeCreate","$bus","$API","API","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","id","loaded","__webpack_modules__","m","amdO","deferred","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","every","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","g","globalThis","Function","obj","prop","hasOwnProperty","Symbol","toStringTag","nmd","paths","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","forEach","bind","__webpack_exports__"],"sourceRoot":""}