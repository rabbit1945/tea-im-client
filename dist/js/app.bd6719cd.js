(function(){"use strict";var t={7681:function(t,e,s){var o={};s.r(o),s.d(o,{reqAuth:function(){return we},reqAuthLogin:function(){return Se},reqGetMsg:function(){return Le},reqLogout:function(){return Ee},reqRoomInfo:function(){return Ae},reqRoomList:function(){return Ie},reqRoomUserList:function(){return Ce},reqUploadAudio:function(){return be},reqUploadBase64:function(){return xe},reqUploadChunk:function(){return Te},reqUploadFiles:function(){return Re},reqUploadMerge:function(){return Ne},reqUploadPut:function(){return Be},reqUserLogin:function(){return ye},reqcheckChunkExis:function(){return Me}});var i=s(6369),a=s(8499),n=s.n(a),r=s(5969),l=s.n(r),u=s(778),c=s.n(u),d=s(5269),m=s.n(d),h=s(7320),g=s(3103),p=s.n(g),f=function(){var t=this,e=t._self._c;return e("router-view")},v=[],k={name:"App",components:{},metaInfo(){return{title:this.$store.state.message.title,meta:[{name:"keyWords",content:"lightning"}],link:[{rel:"asstes",href:"https://assets-cdn.github.com/"}]}},data(){return{title:"闪电"}},mounted(){document.oncontextmenu=function(t){return!1}},destroyed(){},methods:{}},y=k,w=s(1001),S=(0,w.Z)(y,f,v,!1,null,null,null),A=S.exports,C=s(2631),I=function(){var t=this,e=t._self._c;return e("div",{staticClass:"logon login-form"},[e("h1",[t._v("登录")]),e("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules,"label-width":"100px","label-position":"left"}},[e("el-form-item",{attrs:{prop:"login",rules:[{required:!0,message:"账号不能为空"},{type:"email",message:"账号必须是邮箱格式"}]}},[e("el-input",{attrs:{type:"login",autocomplete:"off",placeholder:"账号"},model:{value:t.ruleForm.login,callback:function(e){t.$set(t.ruleForm,"login",e)},expression:"ruleForm.login"}})],1),e("el-form-item",{attrs:{prop:"password",rules:[{required:!0,message:"密码不能为空"},{type:"string",required:!0,min:6,message:"密码大于5个字符"}]}},[e("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"密码"},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}})],1),e("el-form-item",[e("el-button",{staticClass:"but",attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("提交")])],1),e("div",[e("span",{staticClass:"icon-login"},[t._v(" 第三方账号登录 "),e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.getAuthLogin("gitee")}}},[e("use",{attrs:{"xlink:href":"#icon-gitee"}})])])])],1)],1)},E=[],L=(s(560),s(680));const b=(t,e)=>{L.Z.set(t,e)},R=t=>L.Z.get(t),x=t=>{L.Z.remove(t)};var B={data(){return{ruleForm:{login:"",password:""},rules:{},oauthToken:R("oauthToken"),isAuthLogin:R("isAuthLogin")}},mounted(){const t=this.oauthToken,e=this.isAuthLogin;if(console.log("oauthToken",t,e),t&&e)try{this.$store.dispatch("authLogin",{oauthToken:t}).then((t=>{if(1e4!==t.code)return this.$alert("登录失败");this.$router.push("/")})).catch((t=>{this.$alert("登录失败")}))}catch(s){this.$alert(s.message)}},methods:{async getAuthLogin(t){const e=this.oauthToken??"";await this.$store.dispatch("getAuthLogin",`?origin=${t}&oauthToken=${e}`).then((t=>{t.url&&t.url.length>0&&(window.location.href=t.url),t.oauthToken&&t.origin&&(window.location.href="https://"+window.location.host)}))},async submitForm(t){this.$refs[t].validate((async t=>{if(t)try{const{login:t,password:e}=this.ruleForm;t&&e&&await this.$store.dispatch("userLogin",{login:t,password:e}).then((t=>{if(1e4!==t.code)return this.$alert("登录失败");this.$router.push("/")})).catch((t=>{this.$alert("登录失败")}))}catch(e){this.$alert(e.message)}else this.$alert("登录失败")}))}}},M=B,T=(0,w.Z)(M,I,E,!1,null,"68b95f82",null),N=T.exports,O=function(){var t=this,e=t._self._c;return e("el-container",{staticStyle:{display:"flex","justify-content":"center"}},[e("div",{staticClass:"wrap"},[e("MsgTop",{attrs:{room:t.roomInfo}}),e("MsgBase",{attrs:{userStatus:t.userStatus}}),e("Messages",{key:t.timer}),e("UserList",{key:t.timer+"-userList",attrs:{showUser:!0}}),e("Room",{on:{roomUserList:t.roomUserList}}),e("router-view")],1)])},_=[],F=function(){var t=this,e=t._self._c;return e("el-header",{staticClass:"top",staticStyle:{height:"60px",width:"1221px"}},[e("span",{staticClass:"chatRoomName"},[t._v(t._s(t.room.roomName))]),e("span",{staticClass:"peopleNumber"},[t._v(" 在线 "+t._s(t.room.countOnline)+" 人 ")])])},J=[],P={name:"MsgTop",data(){return{}},props:["room"]},Q=P,D=(0,w.Z)(Q,F,J,!1,null,"6dd57cc8",null),U=D.exports,G=function(){var t=this,e=t._self._c;return e("el-aside",{staticClass:"base right_box",attrs:{width:"260px"}},[e("div",[e("img",{staticClass:"userLogo",attrs:{src:t.userLogo,alt:""}}),"online"==t.userStatus?e("span",{staticClass:"userStatus",staticStyle:{"background-color":"blue"}}):t._e(),e("span",{staticClass:"name"},[t._v(t._s(t.nickName))]),e("img",{staticClass:"logout",attrs:{src:s(114),alt:"登出"},on:{click:t.logout}})])])},j=[],Y={name:"MsgBase",data(){return{nickName:this.$store.state.user.userInfo.nick_name,userLogo:this.$store.state.user.userInfo.photo,user_id:this.$store.state.user.userInfo.user_id,room_id:this.$store.state.user.roomInfo.room_id}},props:["userStatus"],components:{},methods:{logout(){this.$confirm("请问是否退出账号？").then((t=>{this.$store.dispatch("userLogout").then((t=>{!0===t&&(this.$socket.close(),this.$message({type:"success",message:"账号登出成功！！！"}),this.$router.push({name:"Login"}))}))})).catch((t=>{}))}}},K=Y,Z=(0,w.Z)(K,G,j,!1,null,"dd600c66",null),z=Z.exports,q=function(){var t=this,e=t._self._c;return e("div",[e("el-main",t._b({staticClass:"message el-main"},"el-main",t.message,!1),[e("virtual-list",{ref:"returnBottom",staticClass:"msg-list",attrs:{"data-key":"seq","data-sources":t.historyMessageList,"data-component":t.itemComponent,keeps:this.keeps,"estimate-size":this.estimateSize,start:100},on:{totop:t.totop,tobottom:t.bottom,scroll:t.onScroll,composeFile:t.composeFile}})],1),e("el-footer",{staticStyle:{"margin-top":"2px"}},[t.msgNum>0&&!1===t.isBottom?e("el-badge",{staticClass:"item msg-badge-down",attrs:{value:t.msgNum}},[e("el-button",{attrs:{size:"small",icon:"el-icon-arrow-down"},on:{click:t.getLocation}},[t._v("最新消息")])],1):t._e(),t.msgNum>0&&!0===t.isBottom?e("el-badge",{staticClass:"item msg-badge-up",attrs:{value:t.msgNum}},[e("el-button",{attrs:{size:"small",icon:"el-icon-arrow-up"},on:{click:t.getLocation}},[t._v("最新消息")])],1):t._e(),e("MsgSend",{attrs:{proTitle:t.title},on:{findNewMsg:t.findNewMsg}}),e("div",{staticClass:"alertBox",staticStyle:{display:"none"},attrs:{id:"myAlertBox"}})],1)],1)},H=[],W=s(5137),X=s.n(W),V=function(){var t=this,e=t._self._c;return e("div",{staticClass:"world"},[e("VEmojiPicker",{directives:[{name:"show",rawName:"v-show",value:t.showDialog,expression:"showDialog"}],staticClass:"msg-emoji",on:{select:t.selectMsg}}),e("div",{staticClass:"msg-button"},[e("el-button",{staticClass:"msg-el-button",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.toogleDialogEmoji}},[e("img",{staticClass:"msg-img",attrs:{src:"/assets/images/emoji.png"}})]),e("div",{on:{click:t.audioPermission}},[e("img",{staticClass:"msg-img",attrs:{src:"/assets/images/mic.png"}})]),e("div",{staticClass:"audio"},[e("Audio",{ref:"permission",on:{audioData:t.audioData,statusClass:t.statusClass}})],1),e("button",{staticStyle:{"margin-left":"60px"},on:{click:function(e){return t.btnClick()}}},[e("img",{staticClass:"msg-img",attrs:{src:"/assets/images/jietu.png"}})]),e("button",{staticStyle:{"margin-left":"25px","margin-top":"6px"},on:{click:function(e){return t.upload()}}},[e("img",{staticClass:"msg-img",attrs:{src:"/assets/images/file.png"}})])],1),e("uploadPut",{ref:"uploadFile",on:{fileSuccess:t.fileSuccess}}),e("el-upload",{staticClass:"upload-demo",staticStyle:{display:"none"},attrs:{action:"/api/upload/v1/files","show-file-list:false":"",headers:t.headers,multiple:"",limit:3,"file-list":t.fileList,"on-success":t.handleSuccess,"on-error":t.handleError,"before-upload":t.handleBeforeupload}},[e("el-button",{ref:"file",attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1),e("at",t._b({style:t.stateStatus,attrs:{members:t.members,"filter-match":t.filterMatch,"delete-match":t.deleteMatch,"name-key":"nick_name"},on:{insert:t.getValue},scopedSlots:t._u([{key:"item",fn:function(s){return[e("span",{domProps:{textContent:t._s(s.item.nick_name)}})]}}])},"at",t.userList,!1),[e("div",{ref:"input",staticClass:"msg-content",attrs:{id:"sendMsg",placeholder:"ctrl + enter 发送消息",contenteditable:""}},[t._v(" "+t._s(t.emo)+" ")])])],1)},$=[],tt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"myDiv",staticStyle:{display:"none"}},[e("el-upload",{staticClass:"upload-demo",attrs:{action:"#","on-change":t.uploadFile,"show-file-list":!0,"auto-upload":!1}},[t._v(" "+t._s(t.fileList)+" "),e("el-button",{ref:"uploadfileBut",attrs:{size:"small",type:"primary"}},[t._v("上传文件")])],1)],1)},et=[],st=s(7335),ot=s.n(st);const it=(t,e)=>{localStorage.setItem(t,e)},at=3145728,nt=104857600;var rt={name:"uploadPut",components:{},props:{},data(){return{fileList:[],loadingFile:!1,user_id:this.$store.state.user.userInfo.user_id,room_id:this.$store.state.user.roomInfo.room_id,msgInfo:[],type:!1,file:[]}},watch:{},computed:{},methods:{async uploadFile(t){const e=t.raw;this.currentFile=e;const s=t.size;if(s>nt)this.$alert("上传文件小于"+nt/1024/1024+"M");else if(this.fileList=[{name:t.name}],s<=at){console.log("普通：：",s,at);const i=await this.getFileMd5(e,1);var o=new FileReader;o.readAsDataURL(e),o.onload=e=>{this.$store.dispatch("uploadPut",{file:e.target.result,fileName:t.name}).then((e=>{e?this.sendMsg(i,t.name,e.newFileName,1,s,e.path,3):this.$alert("上传失败")}))}}else{const o=Math.ceil(s/at);console.log("文件大小：",s/1024/1024+"Mb","分片数：",o);const i=await this.getFileMd5(e,o);it(i,JSON.stringify(e)),console.log("向后端请求本次分片上传初始化");const a={identifier:i,filename:t.name,totalChunks:o,totalChunks:s,file:t};this.checkChunkExis(a,i,t,o,s)}},sendMsg(t,e,s,o,i,a,n){this.$emit("fileSuccess",{room_id:this.room_id,identifier:t,filename:e,newFileName:s,totalChunks:o,totalSize:i,mergePath:a,uploadStatus:n})},async checkChunkExis(t,e,s,o,i){await this.$store.dispatch("checkChunkExis",t).then((t=>{if(1e4!==t.code)return void this.$alert(t.msg);let a=0;1===t.data.type&&(a=3),this.sendMsg(e,s.name,t.data.newFileName,o,i,t.data.mergePath,a),this.type=t.data.type,this.file=s}))},getFileMd5(t,e){return new Promise(((s,o)=>{let i=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,a=e,n=0,r=new(ot().ArrayBuffer),l=new FileReader;function u(){let e=n*at,s=e+at;s>t.size&&(s=t.size),l.readAsArrayBuffer(i.call(t,e,s))}l.onload=function(t){if(r.append(t.target.result),n++,n<a)u();else{let t=r.end();s(t)}},l.onerror=function(t){o(t)},u()}))},async getMsg(t){if(0!=t.content_type){this.msgInfo=t;let e=t.total_chunks,s=t.file_size,o=t.md5,i=t.file_name,a=t.seq;0===this.type&&await this.chunk(e,s,o,i,a)}},chunk(t,e,s,o,i){let a=this.file,n=0;for(var r=n;r<t;r++){let n=r*at,u=Math.min(e,n+at),c=r,d=a.raw.slice(n,u);var l=new FileReader;l.readAsDataURL(d);let m=(c+1)/t*100;l.onload=n=>{let r={seq:i,user_id:this.user_id,room_id:this.room_id,identifier:s,filename:a.name,totalChunks:t,chunkNumber:c,totalSize:e,newFileName:o,file:n.target.result,chunkSize:at,uploadProgress:m.toFixed(2)+"%"};console.log("开始上传第"+c+"个分片"),this.$socket.emit("chunkFile",r)}}}},sockets:{},created(){},mounted(){}},lt=rt,ut=(0,w.Z)(lt,tt,et,!1,null,"1ff5e0f4",null),ct=ut.exports,dt=s(2176),mt=s(3683),ht=function(){var t=this,e=t._self._c;return e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowPermission,expression:"isShowPermission"}],ref:"keypressSpace",staticClass:"msg-audio",attrs:{tabindex:"1"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:t.startRecorder()}}},[e("span",[e("img",{staticClass:"msg-img",attrs:{src:s(6869)}}),t._v("按空格开始/结束。 "),e("el-button",{attrs:{round:"",size:"mini",type:"success"},on:{click:function(e){return t.outPlay()}}},[t._v("退出")])],1),e("span",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.startEnd&&0===t.countdownimes,expression:"startEnd && countdownimes === 0"}],staticClass:"times"},[t._v(t._s(t.satrtTime))]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.startEnd&&t.countdownimes>0,expression:"startEnd && countdownimes > 0"}],staticClass:"times"},[t._v(t._s(t.countdownimes)+" 10秒之后自动发送")]),e("canvas",{directives:[{name:"show",rawName:"v-show",value:t.startEnd,expression:"startEnd"}],staticClass:"canvas",attrs:{id:"canvas"}})])])])},gt=[],pt=(s(4224),s(1121),s(7133),s(206)),ft=s.n(pt);const vt=s(4281),kt=new(ft())({sampleBits:16,sampleRate:11025,numChannels:1,compiling:!0});var yt={name:"Audio",data(){return{drawRecordId:null,oCanvas:null,ctx:null,drawPlayId:null,pCanvas:null,pCtx:null,startEnd:!1,isShowPermission:!1,satrtTime:0,endTime:60,countdownimes:0}},mounted(){this.startCanvas()},methods:{startCanvas(){this.oCanvas=document.getElementById("canvas"),this.ctx=this.oCanvas.getContext("2d")},outPlay(){this.stopRecorder(),this.startEnd=!1,this.isShowPermission=!1,this.$emit("statusClass",{status:!1})},startRecorder(){!1===this.startEnd?kt.start().then((()=>{this.startEnd=!0,this.drawRecord()}),(t=>{this.stopRecorder(),this.getRecorder(),this.startEnd=!0,console.log("error:",t)})):(this.stopRecorder(),this.getRecorder(),this.startEnd=!1)},resumeRecorder(){kt.resume()},pauseRecorder(){kt.pause(),this.drawRecordId&&cancelAnimationFrame(this.drawRecordId),this.drawRecordId=null},stopRecorder(){kt.stop(),this.drawRecordId&&cancelAnimationFrame(this.drawRecordId),this.drawRecordId=null},playRecorder(){kt.play(),this.drawPlay()},pausePlayRecorder(){kt.pausePlay()},resumePlayRecorder(){kt.resumePlay(),this.drawPlay()},stopPlayRecorder(){kt.stopPlay()},destroyRecorder(){kt.destroy().then((function(){kt=null,this.drawRecordId&&cancelAnimationFrame(this.drawRecordId),this.drawRecordId=null}))},getRecorder(){let t=parseInt(kt.duration),e=kt.fileSize;const s=this.convertToMp3(kt.getWAV());this.uploadWAVData(s,t,e)},downPCM(){kt.downloadPCM("新文件")},downWAV(){kt.downloadWAV("新文件")},uploadWAVData(t,e,s){var o=new FormData;let i=(new Date).getTime()+".mp3";const a=new File([t],i);o.append("file",a),this.$emit("audioData",{formData:o,toltime:e,fileSize:s,fileName:i})},getPermission(){this.isShowPermission?(this.isShowPermission=!1,this.$emit("statusClass",{status:!1})):ft().getPermission().then((()=>{console.log("获取权限成功"),this.isShowPermission=!0,this.$emit("statusClass",{status:!0})}),(t=>{console.log(`${t.name} : ${t.message}`),this.$alert("请开启麦克风权限")}))},getMp3Data(){const t=this.convertToMp3(kt.getWAV());kt.download(t,"recorder","mp3")},convertToMp3(t){const e=vt.WavHeader.readHeader(t),{channels:s,sampleRate:o}=e,i=new vt.Mp3Encoder(s,o,128),a=kt.getChannelData(),n=[],r=a.left&&new Int16Array(a.left.buffer,0,a.left.byteLength/2),l=a.right&&new Int16Array(a.right.buffer,0,a.right.byteLength/2),u=r.length+(l?l.length:0),c=1152;for(let m=0;m<u;m+=c){const t=r.subarray(m,m+c);let e=null,o=null;2===s?(e=l.subarray(m,m+c),o=i.encodeBuffer(t,e)):o=i.encodeBuffer(t),o.length>0&&n.push(o)}const d=i.flush();return d.length>0&&n.push(d),new Blob(n,{type:"audio/mp3"})},drawRecord(){this.satrtTime=parseInt(kt.duration);let t=this.endTime-this.satrtTime;if(t<=10&&t>0&&(this.countdownimes=this.endTime-this.satrtTime,0==this.countdownimes&&this.startEnd))return this.stopRecorder(),this.getRecorder(),this.startEnd=!1,this.satrtTime=0,this.countdownimes=0,!0;this.drawRecordId=requestAnimationFrame(this.drawRecord);let e=kt.getRecordAnalyseData(),s=e.length;this.ctx.fillStyle="rgb(200, 200, 200)",this.ctx.fillRect(0,0,this.oCanvas.width,this.oCanvas.height),this.ctx.lineWidth=2,this.ctx.strokeStyle="rgb(0, 0, 0)",this.ctx.beginPath();for(var o=1*this.oCanvas.width/s,i=0,a=0;a<s;a++){var n=e[a]/128,r=n*this.oCanvas.height/2;0===a?this.ctx.moveTo(i,r):this.ctx.lineTo(i,r),i+=o}this.ctx.lineTo(this.oCanvas.width,this.oCanvas.height/2),this.ctx.stroke()},drawPlay(){this.drawPlayId=requestAnimationFrame(this.drawPlay);let t=kt.getPlayAnalyseData(),e=t.length;this.pCtx.fillStyle="rgb(200, 200, 200)",this.pCtx.fillRect(0,0,this.pCanvas.width,this.pCanvas.height),this.pCtx.lineWidth=2,this.pCtx.strokeStyle="rgb(0, 0, 0)",this.pCtx.beginPath();for(var s=1*this.pCanvas.width/e,o=0,i=0;i<e;i++){var a=t[i]/128,n=a*this.pCanvas.height/2;0===i?this.pCtx.moveTo(o,n):this.pCtx.lineTo(o,n),o+=s}this.pCtx.lineTo(this.pCanvas.width,this.pCanvas.height/2),this.pCtx.stroke()}}},wt=yt,St=(0,w.Z)(wt,ht,gt,!1,null,"e4953074",null),At=St.exports,Ct=s(349),It=s.n(Ct),Et={name:"MsgSend",components:{VEmojiPicker:mt.WE,Audio:At,At:It(),uploadPut:ct},data(){return{title:"闪电",text:"",showDialog:!1,drawer:!1,direction:"btt",user_id:this.$store.state.user.userInfo.user_id,nick_name:this.$store.state.user.userInfo.nick_name,userLogo:this.$store.state.user.userInfo.photo,room_id:this.$store.state.user.roomInfo.room_id,audio:{},showUser:!1,sumNoticeOtherUser:0,countStr:0,members:[],contactList:[],fileList:[],headers:{Authorization:"Bearer "+this.$store.state.user.token},imagesExt:["png","jpg","jpeg","bmp","gif","webp","psd","svg","tiff"],audioExt:["mp3","wav","wma","flac","midi","ra","aac","cda","mov","wavpack","ape"],videoExt:["avi","wmv","mpg","mov","rm","ram","swf","flv","mp4"],fileName:"",fileSize:0,stateStatus:"display: block;",emo:""}},metaInfo(){return{title:this.$store.state.message.title}},sockets:{async roomCallback(t){var e=t.user_id,s=t.room_id,o=t.contactList;console.log("roomCallback::",t),await this.$store.dispatch("getMessage",t).then((i=>{this.$refs.uploadFile.getMsg(t),this.$emit("findNewMsg",{sendUserId:e,userId:this.user_id,room_id:s}),this.contactList=[],this.audio.fileSize=0,this.$store.dispatch("getTitle",{user_id:e,contactList:o}).then((t=>{this.title=this.$store.state.message.title}))}))}},mounted(){window.addEventListener("keydown",this.send,!0)},destroyed(){window.removeEventListener("keydown",this.send,!0)},computed:{userList:{get(){this.members=this.$store.state.user.roomUserList.userList}}},methods:{send(){window.event.ctrlKey&&"Enter"==window.event.code&&this.msgSend()},audioPermission(){this.$refs.permission.getPermission()},handleBeforeupload(t){console.log("file",t),this.fileName=t.name,this.fileSize=t.size},handleError(t,e,s){this.$alert("文件上传失败，请重新上传！！！")},handleSuccess(t){if(console.log(t),1e4===t.code){let e=t.data;if(Object.keys(e).length>0){let t=e.file,s=t.lastIndexOf("."),o=t.substr(s+1),i=this.fileExt(o);this.sendAudio({file_name:e.fileName,file_size:e.fileSize,path:t,content_type:i})}}else this.$alert("文件上传失败，请重新上传！！！")},fileExt(t){let e=0;return e=-1!==this.imagesExt.indexOf(t.toLowerCase())?2:-1!==this.audioExt.indexOf(t.toLowerCase())?1:-1!==this.videoExt.indexOf(t.toLowerCase())?4:3,e},upload(){let t=this.$refs.uploadFile.$refs.uploadfileBut;t.$el.click()},btnClick(){new dt.Z({enableWebRtc:!1,level:2001,completeCallback:this.callback,closeCallback:this.closeFn,canvasWidth:window.innerWidth,canvasHeight:window.innerHeight})},callback(t,e){console.log(t),this.$store.dispatch("uploadBase64",t).then((e=>{console.log("uploadFiles",e);let s=e.file,o=this.$refs.input,i=o.innerHTML,a=(JSON.stringify(t),i+"<img id = 'image' onclick= 'myBtn("+JSON.stringify(s)+")' src="+s+">");o.innerHTML=a}))},convertImageToCanvas(t){var e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e},closeFn(){},filterMatch(t,e){return 0===t.toLowerCase().indexOf(e.toLowerCase())},deleteMatch(t,e,s){return this.contactList=this.contactList.filter((t=>t.nick_name!=e.trim())),console.log("deleteMatch:",this.contactList),e===t+s},getValue(t){return console.log("contactListval:",t),this.contactList.push({nick_name:t.nick_name,is_robot:t.is_robot,photo:t.photo,room_id:t.photo,user_id:t.user_id,content_type:t.content_type,room_id:t.room_id})},audioData(t){if(!t)return tihs.alert("语音出现问题，请重试！！！"),!1;this.$store.dispatch("uploadAudio",t.formData).then((e=>{let s=e.file,o=s.lastIndexOf("."),i=s.substr(o+1),a=this.fileExt(i);this.audio={path:s,file_name:t.fileName,file_size:t.fileSize,content_type:a},this.sendAudio(this.audio)}))},fileSuccess(t){if(t){let e=t.mergePath,s=e.lastIndexOf("."),o=e.substr(s+1);t.content_type=this.fileExt(o),t.file_name=t.newFileName,t.original_file_name=t.filename,t.file_size=t.totalSize,t.md5=t.identifier,t.path=e,this.sendAudio(t)}},statusClass(t){console.log(t);let e="display: block;";!0===t.status&&(e="display: none;"),this.stateStatus=e},selectMsg(t){var e;let s=this.$refs.input;console.log(t);let o=getSelection();s.focus();let i=[];if(o.rangeCount>0){i=o.getRangeAt(0),e&&(o.removeAllRanges(),o.addRange(e));let s=i.startContainer,a=i.startOffset;a>0?(s.insertData(a,t.data),i.setStart(s,a+t.data.length),i.collapse(!0),o.removeAllRanges(),o.addRange(i),e=o.getRangeAt(0)):(this.emo=t.data,o.removeAllRanges())}},toogleDialogEmoji(){this.showDialog=!this.showDialog},msgSend(){this.$socket.open();let t=document.getElementById("sendMsg");console.log(t),""==t.textContent&&this.$alert("你好，客官你还没有添写消息呢！！！");let e=t.innerHTML,s=this.contactList,o=0;this.audio.fileSize>0&&(e=this.audio.file,o=1);let i=this.msgInfo();i.msg=e,i.content_type=o,i.contactList=s,console.log("room_id",this.room_id),console.log("发送msgData",i),this.$socket.volatile.emit("room",i)},sendAudio(t){t.length<=0&&this.$alert("参数为空，请重新参数");let e=this.msgInfo(),s=t.content_type;e.msg=t.path,e.file_name=t.file_name,e.file_size=t.file_size,e.content_type=s,e.md5=t.md5,e.file_path=t.path,e.total_chunks=t.totalChunks,e.original_file_name=t.original_file_name,e.upload_status=t.uploadStatus,this.$socket.volatile.emit("room",e)},msgInfo(){const t=this.user_id,e=this.nick_name,s=this.userLogo,o=this.room_id;let i={room_id:o,user_id:t,nick_name:e,userLogo:s};return i}}},Lt=Et,bt=(0,w.Z)(Lt,V,$,!1,null,"349af57a",null),Rt=bt.exports,xt=function(){var t=this,e=t._self._c;return e("div",{attrs:{index:t.index}},[e("span",{staticClass:"time-line"},[t._v(t._s(this.source.send_time)+" ")]),0==this.source.is_revoke?e("div",{class:1==this.source.tag?"stream-item":"stream-item creator"},[e("div",{class:1==this.source.tag?"item":"item creator"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{src:this.source.userLogo}})]),e("div",{staticClass:"body"},[e("div",{class:1==this.source.tag?"name":"name transform"},[t._v(t._s(this.source.nick_name))]),e("div",{ref:"content",staticClass:"content",attrs:{"data-isRevokeHidden":t.isRevokeHidden}},[0===this.source.content_type?e("div",{staticClass:"text",attrs:{contenteditable:"false"}},[e("div",{on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[e("div",{ref:"textMsg",staticClass:"msg-html",domProps:{innerHTML:t._s(this.source.msg)}})])]):t._e(),1===this.source.content_type?e("div",{staticClass:"text",attrs:{contenteditable:"false"}},[e("div",{on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[e("av-bars",{attrs:{"canv-height":30,"audio-src":this.source.msg}})],1)]):t._e(),2===this.source.content_type?e("div",{staticClass:"text",attrs:{contenteditable:"false"}},[e("div",{on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[e("el-popover",{staticClass:"vedio",attrs:{placement:"left",trigger:"click"}},[e("img",{attrs:{src:this.source.msg}}),e("img",{staticStyle:{"max-width":"800px","max-height":"800px"},attrs:{slot:"reference",src:this.source.msg},slot:"reference"})])],1)]):t._e(),3===this.source.content_type?e("div",{staticClass:"text file",attrs:{contenteditable:"false"},on:{click:function(e){return t.down()}}},[e("div",{on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[e("div",[t._v(" "+t._s(this.source.original_file_name)+" "),e("a",{ref:"downFile",staticStyle:{display:"none"},attrs:{href:this.source.msg}})]),e("div",{staticClass:"fileSize",attrs:{contenteditable:"false"}},[t._v(" "+t._s(this.source.fileSize)+"KB")]),e("div",{staticClass:"upload_status"},[0===this.source.upload_status?e("span",[t._v("上传中")]):t._e(),1===this.source.upload_status?e("span",[t._v("上传成功")]):t._e(),2===this.source.upload_status?e("span",[t._v("发送中")]):t._e(),3===this.source.upload_status?e("span",[t._v("发送成功")]):t._e(),4===this.source.upload_status?e("span",[t._v("发送失败")]):t._e()]),t._m(0)])]):t._e(),4===this.source.content_type?e("div",{staticClass:"text",attrs:{contenteditable:"false"}},[e("div",{on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[e("el-popover",{staticClass:"vedio",attrs:{placement:"left",trigger:"click"}},[e("video",{staticClass:"popover-vedio",attrs:{controls:""}},[e("source",{attrs:{src:this.source.msg}})]),e("img",{staticStyle:{"max-width":"400px","max-height":"400px"},attrs:{slot:"reference",src:"/assets/images/vedio.png"},slot:"reference"})])],1)]):t._e()])])])]):t._e(),1===this.source.is_revoke?e("div",{staticClass:"time-line",staticStyle:{margin:"20px 10px"}},[e("span",[t._v("你撤回了一条消息")])]):t._e()])},Bt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"fileImg"},[e("img",{attrs:{src:"/assets/images/文件.png"}})])}],Mt=s(8646),Tt=s(8134),Nt=s.n(Tt);i["default"].use(Mt.Z);const Ot=window.speechSynthesis,_t=new SpeechSynthesisUtterance,Ft=speechSynthesis.getVoices();var Jt={name:"Item",data(){return{progress:0,is_stop:!0,duration:0,curr:0,volume:50,balance:50,style:"max-height: 100vh;max-width: 60vw; display:none;",user_id:this.$store.state.user.userInfo.user_id,room_id:this.$store.state.user.roomInfo.room_id,token:this.$store.state.user.token,isloading:!1,list:[]}},props:{index:{type:Number},source:{type:Object,default(){return{}}}},computed:{isRevokeHidden(){let t=Date.parse(this.source.send_time)+3e5,e=(new Date).getTime(),s=!0;return 0==this.source.tag&&t>=e&&(s=!1),s}},methods:{copyOrderId2(){var t=document.createElement("input");t.value=this.source.msg,document.body.appendChild(t),t.select(),document.execCommand("Copy"),document.body.removeChild(t),this.$message.success("复制成功！")},onContextmenu(t){return this.$contextmenu({items:[{label:"复制",onClick:()=>{this.copyOrderId2()}},{label:"语音",hidden:0!=this.source.content_type,onClick:()=>{this.handleSpeak()}},{label:"撤回",hidden:this.$refs.content.getAttribute("data-isRevokeHidden"),onClick:()=>{this.$socket.emit("revokeMsg",{token:this.token,room_id:this.room_id,seq:this.source.seq,index:this.index})}}],event:t,customClass:"custom-class tag-read",zIndex:1,minWidth:230}),!1},handleSpeak(){let t=this.$refs.textMsg.textContent;_t.text=t,_t.lang="zh-CN",_t.voice=Ft[20],_t.volume=1,_t.rate=1,_t.pitch=1,Ot.speak(_t)},openImagesClick(){this.display="max-height: 100vh;max-width: 60vw; display:block;"},closeImagesClick(){this.display="max-height: 100vh;max-width: 60vw; display:none;"},down(){if(1==this.isloading)return this.$alert("正在上传！！！");let t=this.source,e=t.merge_number;this.list=t;let s=t.md5,o=t.seq,i=t.total_chunks,a=t.totalSize,n=t.file_name,r=t.chunk_number,l=t.upload_status,u={identifier:s,newFileName:n,totalChunks:i,mergeNumber:e,chunkNumber:r,totalSize:a,seq:o};0==l?this.isloading:1==l||2==l?(this.isloading,this.composeFile(u)):3==l&&this.$refs.downFile.click()},composeFile(t){this.isloading=!0;let e={seq:t.seq,room_id:this.room_id,user_id:this.user_id,identifier:t.identifier,newFileName:t.newFileName,totalChunks:t.totalChunks,mergeNumber:t.mergeNumber,totalSize:t.totalSize,chunkSize:Math.ceil(t.totalSize/t.totalChunks),uploadStatus:2};this.$socket.emit("mergeFile",e)}},sockets:{async updateMsgStatusCallback(t){let e=t.data;1e4===t.code&&(this.list.upload_status=e.uploadStatus)}},components:{Clipboard:Nt()}},Pt=Jt,Qt=(0,w.Z)(Pt,xt,Bt,!1,null,"25a3eb36",null),Dt=Qt.exports;let Ut=R("roomNum")?JSON.parse(R("roomNum")):[];var Gt={name:"Message",data(){return{historyMessageList:[],tabshow:!1,user_id:this.$store.state.user.userInfo.user_id,room_id:this.$store.state.user.roomInfo.room_id,isLoading:!1,isEnd:!1,page:0,limit:20,timer:0,itemComponent:Dt,estimateSize:50,keeps:20,msgNum:0,isBottom:!1,totalNum:0}},props:["title"],sockets:{async chunkFileCallback(t){if(1e4!=t.code)return this.$alert(t.msg);{let e=t.data;e.isChunk=!0,1==e.uploadStatus&&this.updateStatus(e)}},async updateMsgStatusCallback(t){let e=t.data,s=e.seq;console.log("上传状态::",[e.newFileName,e.uploadStatus,t.code]),console.log("消息::",this.historyMessageList);var o=this.historyMessageList.find((function(t){return t.seq===s}));return 1e4!==t.code?this.updateStatus(t.data):1==e.uploadStatus?(o.upload_status=1,this.composeFile(e)):o.upload_status=e.uploadStatus,!0},async mergeFileCallback(t){let e=t.data,s={room_id:this.room_id,identifier:e.identifier,newFileName:e.newFileName,totalChunks:e.totalChunks,mergeNumber:e.mergeNumber,totalSize:e.totalSize,uploadStatus:e.uploadStatus,seq:e.seq};return 1e4!==t.code?s.uploadStatus=4:(console.log("mergeFileCallback:::",s),3==s.uploadStatus&&this.updateStatus(s)),!0},async revokeMsgCallback(t){let e=t.data;if(1e4===t.code){console.log("source::",e);let t=this.historyMessageList[e.index];t.is_revoke=1,this.historyMessageList[e.index]=t}else this.$alert("请稍后重试")}},mounted(){this.$store.state.message.historyMessageList=[],console.log("初始化消息"),this.initLoadMsg()},destroyed(){},methods:{async composeFile(t){let e={seq:t.seq,room_id:this.room_id,user_id:this.user_id,identifier:t.identifier,newFileName:t.newFileName,totalChunks:t.totalChunks,mergeNumber:0,totalSize:t.totalSize,chunkSize:Math.ceil(t.totalSize/t.totalChunks),uploadStatus:2};console.log("合并文件::",e),this.updateStatus(e),await this.$socket.emit("mergeFile",e)},async updateStatus(t){await this.$socket.emit("updateMsgStatus",{room_id:this.room_id,user_id:this.user_id,identifier:t.identifier,newFileName:t.newFileName,uploadStatus:t.uploadStatus,totalChunks:t.totalChunks,chunkNumber:t.chunkNumber,totalSize:t.totalSize,seq:t.seq,isChunk:t.isChunk})},getLocation(t){let e=this.$refs.returnBottom,s=this.keeps;this.totalNum>this.msgNum&&(s=this.totalNum-this.msgNum),!0===this.isBottom&&(s-=10),e.scrollToIndex(s),this.msgNum=0,this.isBottom=!1,Ut[this.room_id]=0,b("roomNum",JSON.stringify(Ut))},onScroll(t){this.page>1&&(this.msgNum=0)},findNewMsg(t){if(t.room_id===this.room_id&&Object.keys(t).length>0)return this.$nextTick((()=>{if(t.sendUserId==t.userId){let t=this.$refs.returnBottom;t.reset(),t.scrollToBottom(),this.msgNum=0,this.isBottom=!0}else this.isBottom=!1,this.msgNum++})),this.msgNum},totop(){console.log("到顶了"),this.getdata()},bottom(){this.isBottom=!0;let t=this.msgNum;t>=10&&(this.msgNum=t),console.log("到底了")},getdata(){this.isEnd||this.isLoading||this.initLoadMsg()},initLoadMsg(){this.page++,this.isLoading=!0;let t=this.$refs.returnBottom;this.$store.dispatch("getGetMsg",{room_id:this.room_id,page:this.page,limit:this.limit}).then((e=>{e?this.$nextTick((()=>{this.isLoading=!1,1==this.page&&(t.reset(),t.scrollToBottom(),this.isBottom=!0,this.msgNum=e.offTotal+Ut[this.room_id],console.log("this.msgNum::",this.msgNum))})):this.isEnd=!0}))}},computed:{message:{get(){let t=this.$store.state.message.historyMessageList||[];this.historyMessageList=t,console.log("historyMessageList::",t),this.totalNum=this.historyMessageList.length}}},components:{MsgSend:Rt,virtualList:X()}},jt=Gt,Yt=(0,w.Z)(jt,q,H,!1,null,"e24aff0e",null),Kt=Yt.exports,Zt=function(){var t=this,e=t._self._c;return e("el-aside",{staticClass:"userList",staticStyle:{width:"158px"}},[e("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],staticClass:"list",attrs:{"infinite-scroll-disabled":"disabled"}},t._l(t.userList,(function(s){return e("li",{staticClass:"list list-line",attrs:{id:"userLine"}},[e("img",{staticClass:"logo",attrs:{id:"userLine",src:s.photo,alt:""}}),"online"==s.is_online?[e("span",{staticClass:"userStatus",staticStyle:{"background-color":"cadetblue"}})]:t._e(),"offline"==s.is_online?[e("span",{staticClass:"userStatus"})]:t._e(),t._v(" "+t._s(s.nick_name)+" ")],2)})),0)])},zt=[],qt={data(){return{userList:[],count:1,noMore:!1,loading:!1,pages:0,size:100}},props:{showUser:{type:Boolean}},computed:{disabled(){return this.loading||this.noMore}},mounted(){this.load()},methods:{load(){this.loading=!0,this.pages+=1,this.getUserList()},getUserList(){let t={pages:this.pages,size:this.size};this.$store.dispatch("getRoomUserList",t).then((t=>{let e=t.userList;this.userList=e,e.length<this.size&&(this.noMore=!0),this.userList.length===this.$store.state.user.roomUserList.total&&(this.noMore=!0),this.loading=!1}))}}},Ht=qt,Wt=(0,w.Z)(Ht,Zt,zt,!1,null,"bb25528c",null),Xt=Wt.exports,Vt=function(){var t=this,e=t._self._c;return e("el-footer",{staticClass:"footer",attrs:{direction:"vertical",width:"100px",height:"800px"}},[e("ul",t._b({staticClass:"list"},"ul",t.message,!1),t._l(t.list,(function(s){return e("li",{staticClass:"list-line",on:{click:function(e){return t.selectRoom(s.room_id)}}},[e("div",[t.selectRoomId===s.room_id?e("el-badge",{staticClass:"item",attrs:{max:t.max}},[e("el-button",{staticStyle:{color:"cadetblue"},attrs:{size:"small"}},[t._v(" "+t._s(s.name)+" ")])],1):t._e()],1),t.selectRoomId!=s.room_id?e("div",[e("el-badge",{staticClass:"item",attrs:{value:s.off_delivered_count+t.msgNumList[s.room_id],max:t.max}},[e("el-button",{attrs:{size:"small"}},[t._v(" "+t._s(s.name))])],1)],1):t._e()])})),0)])},$t=[];window.speechSynthesis,new SpeechSynthesisUtterance,speechSynthesis.getVoices();var te={name:"Room",data(){return{list:[],selectRoomId:1,wsmessageList:[],room_id:this.$store.state.user.roomInfo.room_id,max:140,msgNum:0,msgNumList:R("roomNum")?JSON.parse(R("roomNum")):[]}},props:[],mounted(){this.$store.dispatch("getRoomList").then((t=>{t?this.list=t:this.$alert("没有获取到房间列表")}))},methods:{async selectRoom(t){await this.$store.dispatch("getRoomInfo",t).then((e=>{e?(this.$store.dispatch("getRoomUserList",{pages:1,size:100}).then((t=>{!1===t&&this.$alert("用户列表请求失败"),this.$emit("roomUserList",t)})),this.selectRoomId=t):this.$alert("聊天室信息请求失败")}))}},computed:{message:{get(){let t=this.$store.state.message.offMessageList,e=this.$store.state.user.roomList;if(t){let s=t.room_id;"undefined"===typeof this.msgNumList[s]&&(this.msgNum=0);for(let t=0;t<e.length;t++)e[t].room_id!=this.selectRoomId&&e[t].room_id==s&&(this.msgNum++,this.msgNumList[s]=this.msgNum);b("roomNum",JSON.stringify(this.msgNumList))}}}}},ee=te,se=(0,w.Z)(ee,Vt,$t,!1,null,"58a16f2c",null),oe=se.exports,ie={name:"Home",components:{MsgTop:U,MsgBase:z,Messages:Kt,UserList:Xt,Room:oe},data(){return{user_id:this.$store.state.user.userInfo.user_id,room_id:this.$store.state.user.roomInfo.room_id,userList:this.$store.state.user.roomUserList,roomInfo:this.$store.state.user.roomInfo,msgList:this.$store.state.message.historyMessageList,userStatus:"offline",timer:""}},mounted(){this.$socket.open(),window.addEventListener("blur",this.onblur,!0),window.addEventListener("focus",this.onfocus,!0)},beforeDestroy(){this.$socket.close(),window.removeEventListener("focus",this.onfocus,!0),window.removeEventListener("blur",this.onblur,!0)},sockets:{async connecting(){console.log("Socket 正在连接")},async disconnect(t){console.log("Socket 断开",t),!1===this.$socket.connected&&(this.userStatus="offline")},async connect_error(t){console.log("Socket 连接失败",t),!1===this.$socket.connected&&(this.userStatus="offline")},async connect(){console.log("Socket 连接成功"),!0===this.$socket.connected&&(this.userStatus="online")},async error(t){console.log("Socket错误:",t),console.log(this.$socket.connected),this.handleClose("服务器出错，请联系管理员！！！")}},methods:{roomUserList(t){this.roomInfo=this.$store.state.user.roomInfo,this.timer=this.roomInfo.room_id,console.log(" this.timer",this.timer)},handleClose(t){this.$confirm(t,"错误",{confirmButtonText:"确定",type:"error"}).then((e=>{this.$message({type:"success",message:t})})).catch((t=>{}))},onfocus(t){console.log("得到焦点")},visibilitychange(t){console.log(document.visibilityState);let e=document.visibilityState;"hidden"==e&&console.log(document.visibilityState,"用户离开了"),"visible"==e&&console.log(document.visibilityState,"回来了")},beforeunloadHandler(t){return t=t||window.event,t&&(t.returnValue="关闭提示"),"关闭提示"},onblur(t){console.log("失去焦点")}}},ae=ie,ne=(0,w.Z)(ae,O,_,!1,null,null,null),re=ne.exports,le=[{path:"/login",name:"Login",component:N,meta:{requiresGuest:!0}},{path:"/",name:"Home",component:re,meta:{requiresAuth:!0}}],ue=s(9557),ce=s.n(ue),de=s(4488),me=s(3822),he=s(1076),ge=s(530),pe=s.n(ge);let fe=he.Z.create({baseURL:"/api",timeout:12e4});fe.interceptors.request.use((t=>{let e=Ve.state.user.token;return e&&(t.headers.Authorization="Bearer "+e),pe().start(),t}),(t=>(console.log("服务器请求数据失败",t),Promise.reject(t)))),fe.interceptors.response.use((t=>{let e=t.data;return pe().done(),1e4===e.code?e:20401===e.code?void ss.push({path:"/login"}):e}),(t=>{console.log("服务器响应数据失败",t),ss.push({path:"/login"})}));var ve=fe;let ke=he.Z.create({baseURL:"/mock",timeout:5e3});ke.interceptors.request.use((t=>(pe().start(),t))),ke.interceptors.response.use((t=>(pe().done(),t.data)),(t=>{console.log("服务器响应数据失败",t),alert("服务器响应数据失败")}));const ye=t=>ve({url:"user/v1/login",data:t,method:"post"}),we=t=>ve({url:`user/v1/get/auth/${t}`,type:t,method:"get"}),Se=t=>ve({url:"user/v1/auth/login",data:t,method:"post"}),Ae=t=>ve({url:`room/v1/room/info/${t}`,method:"get"}),Ce=t=>ve({url:`room/v1/room/user/list/${t}`,method:"get"}),Ie=()=>ve({url:"room/v1/room/index",method:"get"}),Ee=()=>ve({url:"user/v1/out",method:"post"}),Le=t=>ve({url:`message/v1/user/msg/${t}`,data:t,method:"get"}),be=t=>ve({url:"upload/v1/audio",data:t,method:"post"}),Re=t=>ve({url:"upload/v1/files",data:t,method:"post"}),xe=t=>ve({url:"upload/v1/base64",data:t,method:"post"}),Be=t=>ve({url:"upload/v1/put",data:t,method:"post"}),Me=t=>ve({url:"upload/v1/checkChunkExist",data:t,method:"post"}),Te=t=>ve({url:"upload/v1/chunk",data:t,method:"post"}),Ne=t=>ve({url:"upload/v1/merge",data:t,method:"post"}),Oe=t=>{localStorage.setItem("TOKEN",t)},_e=()=>localStorage.getItem("TOKEN"),Fe=()=>{localStorage.removeItem("TOKEN")},Je={code:"",userIsOnLine:"offline",token:_e(),userInfo:{},roomInfo:{},roomUserList:[],isAuthLogin:!1,roomList:{}},Pe={USERLOGIN(t,e){t.token=e},GETUSERINFO(t,e){t.userInfo=e,t.userIsOnLine=e.is_online},GETROOMINFO(t,e){t.roomInfo=e},ROOMUSERLIST(t,e){t.roomUserList=e},ISAUTHLOGIN(t,e){t.isAuthLogin=e},GETROOMList(t,e){t.roomList=e}},Qe={async userLogin({commit:t},e){let s=await ye(e);return 1e4===s.code&&(t("USERLOGIN",s.data.token),Oe(s.data.token)),s},async authLogin({commit:t},e){let s=await Se(e);return 1e4==s.code&&(console.log(s),t("USERLOGIN",s.data.token),Oe(s.data.token),x("isAuthLogin")),s},async getAuthLogin({commit:t},e){let s=await we(e);return 1e4==s.code&&(b("isAuthLogin",!0),s.data)},async getRoomUserList({commit:t},e){let s=`${Je.roomInfo.room_id}/${e.pages}/${e.size}`,o=await Ce(s);return 1e4==o.code&&(t("ROOMUSERLIST",o.data),o.data)},async getRoomInfo({commit:t},e){let s=await Ae(e),o=null===s||void 0===s?void 0:s.code;if(1e4===o){let e=null===s||void 0===s?void 0:s.data;return t("GETUSERINFO",null===e||void 0===e?void 0:e.userInfo),t("GETROOMINFO",null===e||void 0===e?void 0:e.roomInfo),!0}return!1},async getRoomList({commit:t}){let e=await Ie(),s=null===e||void 0===e?void 0:e.code;if(1e4===s){let s=null===e||void 0===e?void 0:e.data;return t("GETROOMList",null===s||void 0===s?void 0:s.list),null===s||void 0===s?void 0:s.list}return!1},async userLogout({commit:t}){let e=await Ee();return 1e4===e.code&&(t("USERLOGIN",!1),Fe(),x("isAuthLogin"),!0)}},De={};var Ue={state:Je,mutations:Pe,actions:Qe,getters:De};const Ge={title:"闪电",messageList:[],historyMessageList:[],offTotal:0,offMessageList:[]},je={GETOFFMSGTOTAL(t,e){t.offTotal=e},GETMESSAGELIST(t,e){t.messageList=e},GETHISTORYMESSAGELIST(t,e){Object.keys(e).length>0&&(t.historyMessageList=e)},GETTITLE(t,e){t.title=e},GETOFFMESSAGELIST(t,e){t.offMessageList=e}},Ye={async getTitle({commit:t},e){let s="闪电",o="新消息",i=Ve.state.user.userInfo.user_id;if(e.contactList.length>0){let t=e.contactList.split(",");!0===t.includes(i.toString())&&(o="有人@我")}return i==e.user_id?(t("GETTITLE",s),s):(Object.keys(e).length>0&&(s="【"+o+"】闪电"),t("GETTITLE",s),s)},async getGetMsg({commit:t},e){let s=e.room_id,o=`${s}`;e.page&&(o=`${s}/${e.page}/${e.limit}`);let i=await Le(o);if(1e4===i.code){let e=i.data.list,o=Ve.state.user.userInfo.user_id,l=Ge.historyMessageList||[];for(var a=0;a<e.length;a++)if(e[a].msg_form&&s==e[a].room_id){var n=0;o!=e[a].msg_form&&(n=1);let t=e[a].msg_content,s=/\b(https?:\/\/[^\s]+)/g,i=t.match(s);if(null!==i)for(var r=0;r<i.length;r++)t=t.replace(i[r],`<a href=${i[r]}>${i[r]}</a>`);let u=e[a].file_size,c=u/1024,d={user_id:e[a].msg_form,tag:n,nick_name:e[a].nick_name,msg:t,room_id:e[a].room_id,seq:e[a].seq,send_time:e[a].send_time,userLogo:e[a].photo,content_type:e[a].content_type,file_name:e[a].file_name,original_file_name:e[a].original_file_name,fileSize:c.toFixed(2),totalSize:u,md5:e[a].md5,total_chunks:e[a].total_chunks,upload_status:e[a].upload_status,chunk_number:e[a].chunk_number,merge_number:e[a].merge_number,is_revoke:e[a].is_revoke?e[a].is_revoke:0,delivered:e[a].delivered};l.unshift(d)}console.log("服务端发过来了一个数据:",l);let u=i.data.offTotal;return t("GETHISTORYMESSAGELIST",l),{msg:l,offTotal:u}}return!1},async uploadAudio({commit:t},e){let s=await be(e);if(1e4===s.code)return s.data},async uploadBase64({commit:t},e){let s=await xe(e);if(1e4===s.code)return s.data},async getMessage({commit:t},e){if(Object.keys(e).length>0){20014==e.code&&next("/login");const i=Ve.state.user.userInfo.user_id;var s=0;i!==e.user_id&&(s=1);let a=e.sensitiveMsg,n=/\b(https?:\/\/[^\s]+)/g,r=a.match(n);if(null!==r)for(var o=0;o<r.length;o++)a=a.replace(r[o],`<a href=${r[o]}>${r[o]}</a>`);let l=e.file_size,u=l/1024,c=Ve.state.user.roomInfo.room_id,d=[];if(d={user_id:e.user_id,tag:s,nick_name:e.nick_name,msg:a,room_id:e.room_id,seq:e.seq,send_time:e.send_time,userLogo:e.userLogo,content_type:e.content_type,file_name:e.file_name,totalSize:l,original_file_name:e.original_file_name,fileSize:u.toFixed(2),md5:e.md5,total_chunks:e.total_chunks,upload_status:e.upload_status,chunk_number:e.chunk_number,merge_number:e.merge_number,is_revoke:e.is_revoke?e.is_revoke:0,delivered:0},c==e.room_id){let e=Ge.historyMessageList||[];e.push(d),console.log("oldMsg",e),t("GETMESSAGELIST",d)}else t("GETOFFMESSAGELIST",d);return console.log("getMessage服务端发过来了一个数据:",d),!0}}},Ke={};var Ze={state:Ge,mutations:je,actions:Ye,getters:Ke};const ze={},qe={},He={async checkChunkExis({commit:t},e){let s=await Me(e);return s},async uploadChunk({commit:t},e){let s=await Te(e);return 1e4===s.code&&s.data},async uploadMerge({commit:t},e){let s=await Ne(e);return 1e4===s.code&&s.data},async uploadFiles({commit:t},e){let s=await Re(e);if(1e4===s.code)return s.data},async uploadPut({commit:t},e){let s=await Be(e);return 1e4===s.code&&s.data}},We={};var Xe={state:ze,mutations:qe,actions:He,getters:We};i["default"].use(me.ZP);var Ve=new me.ZP.Store({modules:{user:Ue,message:Ze,upload:Xe}});i["default"].use(C.ZP);let $e=C.ZP.prototype.push,ts=C.ZP.prototype.replace;C.ZP.prototype.push=function(t,e,s){e&&s?$e.call(this,t,e,s):$e.call(this,t,(()=>{}),(()=>{}))},C.ZP.prototype.replace=function(t,e,s){e&&s?ts.call(this,t,e,s):ts.call(this,t,(()=>{}),(()=>{}))};let es=new C.ZP({mode:"history",routes:le,scrollBehavior(t,e,s){return{y:0}}});es.beforeEach((async(t,e,s)=>{let o=Ve.state.user.token;if(null!=o&&t.meta.requiresAuth)try{let t=Ve.state.user.roomInfo.room_id?Ve.state.user.roomInfo.room_id:1;await Ve.dispatch("getRoomInfo",t),i["default"].use(new(ce())({debug:!0,connection:de.ZP.connect("http://192.168.1.108:9502",{connectionStateRecovery:{maxDisconnectionDuration:12e4,skipMiddlewares:!0},reconnectionDelayMax:100,transports:["websocket"],query:{token:Ve.state.user.token},autoConnect:!1})})),s()}catch(a){await Ve.dispatch("userLogout"),s({name:"Login"})}else{let e=t.path;t.meta.requiresGuest?"Login"==t.name&&s():s("/login?redirect="+e)}}));var ss=es;i["default"].component(a.Button.name,a.Button),i["default"].prototype.$msgbox=a.MessageBox,i["default"].prototype.$alert=a.MessageBox.alert,i["default"].config.productionTip=!1,i["default"].use(n()),i["default"].use(l()),i["default"].use(c()),i["default"].use(m()),i["default"].use(h.Z),i["default"].use(p()),new i["default"]({render:t=>t(A),beforeCreate(){i["default"].prototype.$bus=this,i["default"].prototype.$API=o},router:ss,store:Ve}).$mount("#app")},6869:function(t){t.exports="data:image/png;base64,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"},114:function(t){t.exports="data:image/png;base64,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"}},e={};function s(o){var i=e[o];if(void 0!==i)return i.exports;var a=e[o]={id:o,loaded:!1,exports:{}};return t[o].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}s.m=t,function(){s.amdO={}}(),function(){var t=[];s.O=function(e,o,i,a){if(!o){var n=1/0;for(c=0;c<t.length;c++){o=t[c][0],i=t[c][1],a=t[c][2];for(var r=!0,l=0;l<o.length;l++)(!1&a||n>=a)&&Object.keys(s.O).every((function(t){return s.O[t](o[l])}))?o.splice(l--,1):(r=!1,a<n&&(n=a));if(r){t.splice(c--,1);var u=i();void 0!==u&&(e=u)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[o,i,a]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var o in e)s.o(e,o)&&!s.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,a,n=o[0],r=o[1],l=o[2],u=0;if(n.some((function(e){return 0!==t[e]}))){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(l)var c=l(s)}for(e&&e(o);u<n.length;u++)a=n[u],s.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return s.O(c)},o=self["webpackChunkwebchat_view"]=self["webpackChunkwebchat_view"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(7681)}));o=s.O(o)})();
//# sourceMappingURL=app.bd6719cd.js.map